# –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –±–∏–Ω–∞ –≤ Spring 

###### [_home_](https://habr.com/ru/articles/893614/)

---



<details>
        <summary>üü¢ –≠—Ç–∞–ø 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–Ω–∞ (Instantiation) üîΩ</summary>

---
Spring —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –±–∏–Ω–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –Ω–æ –ø–æ–∫–∞ –Ω–µ –≤–Ω–µ–¥—Ä—è–µ—Ç –≤ –Ω–µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

üìå **–ü—Ä–∏–º–µ—Ä –∏–∑ –∂–∏–∑–Ω–∏**: –í—ã –∫—É–ø–∏–ª–∏ –∫–æ—Ñ–µ–≤–∞—Ä–∫—É, –Ω–æ –µ—â–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –µ–µ –∫ —Å–µ—Ç–∏ –∏ –Ω–µ –∑–∞–ª–∏–ª–∏ –≤–æ–¥—É.

---
</details>



<details>
        <summary>üü¢ –≠—Ç–∞–ø 2. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Dependency Injection) üîΩ</summary>

---
Spring –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –±–∏–Ω –≤—Å–µ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

üìå **–ê–Ω–∞–ª–æ–≥–∏—è**: –í—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –∫–æ—Ñ–µ–≤–∞—Ä–∫—É –∫ —Å–µ—Ç–∏ –∏ –∑–∞–ª–∏–ª–∏ –≤–æ–¥—É.

**–°–ø–æ—Å–æ–±—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

* **–ß–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** ‚Äì —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, 
–≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º final –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–∞.  


* **–ß–µ—Ä–µ–∑ –ø–æ–ª–µ - `@Autowired`** –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–æ–ª–µ, –∏ Spring –≤–Ω–µ–¥—Ä–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. 
–û–¥–Ω–∞–∫–æ —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–± –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ª–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–Ω–µ–µ —è–≤–Ω–æ–π.  


* **–ß–µ—Ä–µ–∑ —Å–µ—Ç—Ç–µ—Ä—ã** ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–∏–Ω–∞.  


* **–ß–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@Value`, `@Qualifier` –∏ –¥—Ä.** ‚Äì –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π 
–∏ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–∏–Ω–∞ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤.  

---
</details>



<details>
        <summary>üü¢ –≠—Ç–∞–ø 3. Aware-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã üîΩ</summary>

---
–ï—Å–ª–∏ –±–∏–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç BeanNameAware, BeanFactoryAware, ApplicationContextAware, Spring –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–º—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

üìå **–ü—Ä–∏–º–µ—Ä –∏–∑ –∂–∏–∑–Ω–∏**: –ö–æ—Ñ–µ–≤–∞—Ä–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ —Å–µ—Ç–∏ –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º.

* BeanNameAware ‚Äî –ø–æ–ª—É—á–∞–µ—Ç **–∏–º—è –±–∏–Ω–∞**


* BeanFactoryAware ‚Äî –¥–æ—Å—Ç—É–ø –∫ **BeanFactory**


* ApplicationContextAware ‚Äî –¥–æ—Å—Ç—É–ø –∫–æ **–≤—Å–µ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É Spring**

> ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–¥ –∫ _Spring API_ –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

---
</details>



<details>
        <summary>üü¢ –≠—Ç–∞–ø 4. BeanPostProcessor –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ üîΩ</summary>

---
Spring –≤—ã–∑—ã–≤–∞–µ—Ç `postProcessBeforeInitialization` —É –≤—Å–µ—Ö `BeanPostProcessor`.

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:

* **–í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–Ω–æ–≤** ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.


* **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤** ‚Äì –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∏–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (@Profile).


* **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äì –∑–∞–ø–∏—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∏–Ω–µ –ø–µ—Ä–µ–¥ –µ–≥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.

---
</details>



<details>
        <summary>üü¢ –≠—Ç–∞–ø 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (init) üîΩ</summary>

---
Spring –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–µ—Ç–æ–¥—ã:

* `@PostConstruct`


* `InitializingBean#afterPropertiesSet()`


* –ú–µ—Ç–æ–¥, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `@Bean(initMethod = "init")`

üìå **–ü—Ä–∏–º–µ—Ä**: –ö–æ—Ñ–µ–≤–∞—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç –≤–æ–¥—É –ø–µ—Ä–µ–¥ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º –∫–æ—Ñ–µ.

> –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∏–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º _(–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–î)_.

---
</details>



<details>
        <summary>üü¢ –≠—Ç–∞–ø 6. BeanPostProcessor –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ üîΩ</summary>

---
Spring –≤—ã–∑—ã–≤–∞–µ—Ç postProcessAfterInitialization —É BeanPostProcessor.

**–ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:**

* **–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–æ–≤** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ AOP-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π @Transactional, @Async –∏ –ø–æ–¥–æ–±–Ω—ã—Ö.


* **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –º–µ—Ç–æ–¥–æ–≤.


* **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∏–Ω–æ–≤** ‚Äì –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏–ª–∏ –æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

‚ö†Ô∏è –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–Ω –º–æ–∂–µ—Ç –ø–æ–¥–º–µ–Ω—è—Ç—å—Å—è Spring-–æ–±–µ—Ä—Ç–∫–æ–π (**–≤–∞–∂–Ω–æ –ø—Ä–∏ `instanceof`**).

---
</details>



<details>
        <summary>üü¢ –≠—Ç–∞–ø 7. –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –±–∏–Ω–∞ (destroy) üîΩ</summary>

---
Spring –≤—ã–∑—ã–≤–∞–µ—Ç:

* `@PreDestroy`  


* `DisposableBean#destroy()`  


* –ú–µ—Ç–æ–¥, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `@Bean(destroyMethod = "cleanup")`  

üìå **–ü—Ä–∏–º–µ—Ä**: –í—ã –≤—ã–∫–ª—é—á–∞–µ—Ç–µ –∫–æ—Ñ–µ–≤–∞—Ä–∫—É, —Å–ª–∏–≤–∞–µ—Ç–µ –≤–æ–¥—É, —á–∏—Å—Ç–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –∏ —É–±–∏—Ä–∞–µ—Ç–µ –µ–µ.  

‚ö†Ô∏è –î–ª—è prototype-–±–∏–Ω–æ–≤ —ç—Ç–æ—Ç —ç—Ç–∞–ø –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è ‚Äî –∏—Ö —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.  

---
</details>



<details>
        <summary>üìå –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ üîΩ</summary>

---
#### üìå –ö–æ–¥

```java
// –ì–ª–∞–≤–Ω—ã–π –±–∏–Ω —Å –ª–æ–≥–∞–º–∏ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
@Component
class MyBean implements BeanNameAware, ApplicationContextAware, InitializingBean, DisposableBean {
    
    private String beanName;
    private ApplicationContext context;

    public MyBean() {
        System.out.println("1. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä MyBean –≤—ã–∑–≤–∞–Ω (Instantiation)");
    }

    @Autowired
    public void setDependency(MyDependency dependency) {
        System.out.println("2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å MyDependency –≤–Ω–µ–¥—Ä–µ–Ω–∞ (DI)");
    }

    @Override
    public void setBeanName(String name) {
        this.beanName = name;
        System.out.println("3. BeanNameAware: –ò–º—è –±–∏–Ω–∞ - " + name);
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        this.context = applicationContext;
        System.out.println("3. ApplicationContextAware: –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞–Ω");
    }

    @PostConstruct
    public void postConstruct() {
        System.out.println("5. @PostConstruct: –ë–∏–Ω –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
    }

    @Override
    public void afterPropertiesSet() {
        System.out.println("5. InitializingBean: –ë–∏–Ω –∑–∞–≤–µ—Ä—à–∏–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é");
    }

    @PreDestroy
    public void preDestroy() {
        System.out.println("7. @PreDestroy: –ü–µ—Ä–µ–¥ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ–º –±–∏–Ω–∞");
    }

    @Override
    public void destroy() {
        System.out.println("7. DisposableBean: –ë–∏–Ω —É–Ω–∏—á—Ç–æ–∂–µ–Ω");
    }
}

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∏–Ω –¥–ª—è DI
@Component
class MyDependency {
    public MyDependency() {
        System.out.println("1. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä MyDependency –≤—ã–∑–≤–∞–Ω (Instantiation)");
    }
}

// BeanPostProcessor –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–∞–ø–æ–≤ postProcessBeforeInitialization –∏ postProcessAfterInitialization
@Component
class MyBeanPostProcessor implements BeanPostProcessor {
    
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) {
        if (bean instanceof MyBean) {
            System.out.println("4. BeanPostProcessor: Before Init - " + beanName);
        }
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) {
        if (bean instanceof MyBean) {
            System.out.println("6. BeanPostProcessor: After Init - " + beanName);
        }
        return bean;
    }
}

@SpringBootApplication
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }

}
``` 

### üìå –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å

```textmate
1. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä MyDependency –≤—ã–∑–≤–∞–Ω (Instantiation)
1. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä MyBean –≤—ã–∑–≤–∞–Ω (Instantiation)
2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å MyDependency –≤–Ω–µ–¥—Ä–µ–Ω–∞ (DI)
3. BeanNameAware: –ò–º—è –±–∏–Ω–∞ - myBean
3. ApplicationContextAware: –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞–Ω
4. BeanPostProcessor: Before Init - myBean
5. @PostConstruct: –ë–∏–Ω –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
5. InitializingBean: –ë–∏–Ω –∑–∞–≤–µ—Ä—à–∏–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
6. BeanPostProcessor: After Init - myBean
>>> –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—É—â–µ–Ω

>>> –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
7. @PreDestroy: –ü–µ—Ä–µ–¥ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ–º –±–∏–Ω–∞
7. DisposableBean: –ë–∏–Ω —É–Ω–∏—á—Ç–æ–∂–µ–Ω
```


---
</details>







<details>
        <summary>üìù –ú–∞—Ç–µ—Ä–∏–∞–ª –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏ üîΩ</summary>


</details>

---
###### __

---

[üîô _–∫ —Å–ø–∏—Å–∫—É –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–º–µ_ **Spring** üîô](/ITM/ITM06_Spring/Spring.md)
