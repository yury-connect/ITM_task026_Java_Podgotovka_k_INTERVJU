# Spring proxy

![олицетворение дизайн-патера PROXY](/ITM/ITM06_Spring/otc/Spring_proxy/2025-04-25_15-14-43.png)

[см. видео.](https://youtu.be/DKNDU7OjyJs?t=541)

### PROXY что это, для чего и как применяется в Spring

**Паттерн Заместитель** (_Proxy_) предоставляет объект-заместитель, который управляет 
доступом к другому объекту. То есть создается объект-суррогат, который может 
выступать в роли другого объекта и замещать его (_перехватывать все вызовы_).  

![справка](/ITM/ITM06_Spring/otc/Spring_proxy/2025-04-25_15-26-31.png)

В _Spring_ прокси просто **оборачивает** `bean`, 
он может добавить логику **до** и **после** выполнения методов. 

_Spring AOP_ использует либо динамические прокси **JDK** (_на основе интерфейса_), 
либо **CGLIB** (_на основе класса_) для создания прокси для данного целевого объекта. 

**Динамические прокси-серверы JDK предпочтительнее**, когда у вас есть выбор.

Если целевой объект для проксирования реализует хотя бы один интерфейс, то будет
использоваться динамический прокси JDK. Все интерфейсы, реализованные целевым
типом, будут проксированы.                             

![как работает dynamic proxy](/ITM/ITM06_Spring/otc/Spring_proxy/2025-04-25_15-32-37.png)

Если целевой объект **не реализует** интерфейсов, будет создан прокси-сервер **CGLIB**.

Если вы хотите принудительно использовать проксирование CGLIB 
(например, проксировать каждый метод, определенный для целевого объекта, 
а не только те, которые реализованы его интерфейсами), вы можете это сделать.

Чтобы принудительно использовать прокси CGLIB, установите для атрибута 
**proxy-target-class** элемента **\<aop:config>** значение true.

![Spring AOP - процессор](/ITM/ITM06_Spring/otc/Spring_proxy/2025-04-25_15-38-27.png)

