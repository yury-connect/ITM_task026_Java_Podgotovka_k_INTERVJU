---
tags:
  - TECHNOLOGIES/Microsevices
  - TECHNOLOGIES/Microsevices/–®–∞–±–ª–æ–Ω
---
## –®–∞–±–ª–æ–Ω **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞** –Ω–∞ **Spring Boot** *(–º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)*

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∞, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ –≤–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –¥–≤—É–º—è –º–æ–¥—É–ª—è–º–∏: `user-service-api` (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, DTO, —Å–æ–±—ã—Ç–∏—è) –∏ `user-service-src` (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è). –í–∫–ª—é—á–µ–Ω—ã –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

- **–ú–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (API vs Implementation)
- **–ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** –∫–∞—Ç–∞–ª–æ–≥–æ–≤
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã** (DTO, –º–æ–¥–µ–ª–∏, —Å–æ–±—ã—Ç–∏—è) –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ
- **MapStruct** –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Jakarta Validation
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- **OpenAPI/Swagger**
- **Actuator + Prometheus**
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** (Dockerfile –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ—Ä–Ω—è)
- **CI/CD** (–ø—Ä–∏–º–µ—Ä .gitlab-ci.yml)

---
### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
be-java-advice-user-service/
‚îú‚îÄ‚îÄ .gitlab-ci.yml
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ pom.xml                    # Parent POM
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ user-service-api/
‚îÇ   ‚îú‚îÄ‚îÄ pom.xml                # API-–º–æ–¥—É–ª—å: –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ src/main/java/com/itm/space/userservice/api
‚îÇ       ‚îú‚îÄ‚îÄ dto                # DTO –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ clients
‚îÇ       ‚îú‚îÄ‚îÄ model              # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –±–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä BaseEntity)
‚îÇ       ‚îú‚îÄ‚îÄ events             # –º–æ–¥–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è Kafka
‚îÇ       ‚îî‚îÄ‚îÄ response           # –º–æ–¥–µ–ª–∏ –æ—Ç–≤–µ—Ç–∞ (projection)
‚îî‚îÄ‚îÄ user-service-src/
    ‚îú‚îÄ‚îÄ pom.xml                # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: —Å–µ—Ä–≤–∏—Å, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
    ‚îî‚îÄ‚îÄ src
        ‚îú‚îÄ‚îÄ main/java/com/itm/space/userservice
        ‚îÇ   ‚îú‚îÄ‚îÄ UserServiceApplication.java
        ‚îÇ   ‚îú‚îÄ‚îÄ config          # OpenAPI, Actuator, Security
        ‚îÇ   ‚îú‚îÄ‚îÄ controller      # REST-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
        ‚îÇ   ‚îú‚îÄ‚îÄ service         # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
        ‚îÇ   ‚îú‚îÄ‚îÄ repository      # Spring Data JPA
        ‚îÇ   ‚îî‚îÄ‚îÄ security        # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä Keycloak)
        ‚îî‚îÄ‚îÄ test
            ‚îú‚îÄ‚îÄ java/com/itm/space/userservice
            ‚îî‚îÄ‚îÄ resources/json  # JSON-—Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
                ‚îú‚îÄ‚îÄ controller
                ‚îú‚îÄ‚îÄ repository
                ‚îî‚îÄ‚îÄ kafka
```

---
### 2. –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π `pom.xml`
```xml
<project xmlns="http://maven.apache.org/POM/4.0.0">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.itm.space</groupId>
  <artifactId>be-java-advice-user-service</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>pom</packaging>

  <properties>
    <java.version>17</java.version>
    <spring.boot.version>3.1.0</spring.boot.version>
    <mapstruct.version>1.5.3.Final</mapstruct.version>
  </properties>

  <modules>
    <module>user-service-api</module>
    <module>user-service-src</module>
  </modules>

  <dependencyManagement>
    <dependencies>
      <!-- Spring Boot BOM -->
      <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-dependencies</artifactId>
        <version>${spring.boot.version}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
      <!-- MapStruct BOM -->
    </dependencies>
  </dependencyManagement>
</project>
```

---
### 3. `user-service-api/pom.xml`
```xml
<project xmlns="http://maven.apache.org/POM/4.0.0">
  <parent>
    <groupId>com.itm.space</groupId>
    <artifactId>be-java-advice-user-service</artifactId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <artifactId>user-service-api</artifactId>
  <packaging>jar</packaging>

  <dependencies>
    <!-- Jakarta Validation -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-validation</artifactId>
    </dependency>
    <!-- MapStruct -->
    <dependency>
      <groupId>org.mapstruct</groupId>
      <artifactId>mapstruct</artifactId>
      <version>${mapstruct.version}</version>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>${java.version}</source>
          <target>${java.version}</target>
          <annotationProcessorPaths>
            <path>
              <groupId>org.mapstruct</groupId>
              <artifactId>mapstruct-processor</artifactId>
              <version>${mapstruct.version}</version>
            </path>
          </annotationProcessorPaths>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
```

---
### 4. `user-service-src/pom.xml`
```xml
<project xmlns="http://maven.apache.org/POM/4.0.0">
  <parent>
    <groupId>com.itm.space</groupId>
    <artifactId>be-java-advice-user-service</artifactId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <artifactId>user-service-src</artifactId>
  <packaging>jar</packaging>

  <dependencies>
    <!-- API –∫–æ–Ω—Ç—Ä–∞–∫—Ç -->
    <dependency>
      <groupId>com.itm.space</groupId>
      <artifactId>user-service-api</artifactId>
      <version>${project.version}</version>
    </dependency>
    <!-- Spring Boot Starters -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    <dependency>
      <groupId>org.postgresql</groupId>
      <artifactId>postgresql</artifactId>
    </dependency>
    <!-- OpenAPI -->
    <dependency>
      <groupId>org.springdoc</groupId>
      <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    </dependency>
    <!-- Actuator + Prometheus -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-actuator</artifactId>
    </dependency>
    <dependency>
      <groupId>io.micrometer</groupId>
      <artifactId>micrometer-registry-prometheus</artifactId>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project>
```

---
### 5. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –∫–ª–∞—Å—Å—ã

#### 5.1 `UserServiceApplication.java`
```java
package com.itm.space.userservice;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class UserServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }
}
```

#### 5.2 Controller, Service, Repository, Mapper
–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∫–ª–∞—Å—Å—ã –≤ –ø–∞–∫–µ—Ç–∞—Ö —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ: `controller`, `service`, `repository`, `mapper`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DTO –∏–∑ –º–æ–¥—É–ª—è `user-service-api`.

#### 5.3 –°–æ–±—ã—Ç–∏—è Kafka
–ú–æ–¥–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π (–≤ `user-service-api/src/main/java/.../events`) –ø—É–±–ª–∏–∫—É–π—Ç–µ —á–µ—Ä–µ–∑ Spring Kafka (–¥–æ–±–∞–≤–∏—Ç—å dependency `spring-kafka`).

---
### 6. Dockerfile (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
```dockerfile
FROM eclipse-temurin:17-jdk-jammy
WORKDIR /app
COPY user-service-src/target/user-service-src-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

---
### 7. CI/CD (`.gitlab-ci.yml`)
```yaml
stages:
  - build
  - test
  - package

build:
  stage: build
  script:
    - mvn clean compile --projects user-service-api,user-service-src

test:
  stage: test
  script:
    - mvn test

package:
  stage: package
  script:
    - mvn package -DskipTests
    - docker build -t user-service .
```

---
---
---
–í –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –º—ã –≤—ã–¥–µ–ª—è–µ–º **–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã** (API) –∏ **—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é** –≤ —Ä–∞–∑–Ω—ã–µ –º–æ–¥—É–ª–∏, —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---
## –ü–æ—á–µ–º—É –¥–≤–∞ –º–æ–¥—É–ª—è?
1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**    
    - **API‚Äë–º–æ–¥—É–ª—å** —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ *(–¥—Ä—É–≥–∏–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º, –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º)*: DTO, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –º–æ–¥–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π.        
    - **Implementation‚Äë–º–æ–¥—É–ª—å** —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, security‚Äë–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –∏ –ø—Ä.
        
2. **–ò–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**    
    - –ö–ª–∏–µ–Ω—Ç–∞–º –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ API‚Äë–º–æ–¥—É–ª—å: –æ–Ω–∏ –Ω–µ ¬´—Ç—è–Ω—É—Ç¬ª –Ω–∞ —Å–µ–±—è JPA, Kafka, Spring Boot, Actuator –∏ —Ç.‚Ää–¥.        
    - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–∞–µ—Ç API‚Äë–º–æ–¥—É–ª—å –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ ¬´–≤–µ—Å–æ–≤—ã–µ¬ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.
        
3. **–£–¥–æ–±—Å—Ç–≤–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**    
    - –ö–æ–≥–¥–∞ API‚Äë–º–æ–¥—É–ª—å –º–µ–Ω—è–µ—Ç—Å—è (–¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ DTO –∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ), –µ–≥–æ –º–æ–∂–Ω–æ –≤–µ—Ä—Å–∏–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.        
    - –ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ (consumer‚Äëdriven) —Ç–µ—Å—Ç—ã —á–∏—Ç–∞—é—Ç —Å—Ö–µ–º—ã DTO/—Å–æ–±—ã—Ç–∏–π –∏–∑ API‚Äë–º–æ–¥—É–ª—è, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Å–ª–æ–º–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
        
4. **–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏**    
    - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–æ–ª—å–∫–æ API‚Äë–º–æ–¥—É–ª—è –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –≤—Å—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–¥—É–ª—è `user-service-api`.
        
5. **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**    
    - –≠—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Separate Interface and Implementation).        

---
## –ß—Ç–æ –ø–∏—à–µ–º –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ

### 1. `user-service-api`
- **DTO** (`/dto`) ‚Äî –≤—Ö–æ–¥–Ω—ã–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –º–æ–¥–µ–ª–∏ REST (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserDto`).    
- **–ú–æ–¥–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π** (`/events`) ‚Äî –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ Kafka (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserCreatedEvent`).    
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–µ –º–æ–¥–µ–ª–∏/–ø—Ä–æ–µ–∫—Ü–∏–∏** (`/response`, `/model`) ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –±–∞–∑–æ–≤—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `BaseEntity`, `UserSummary`).    
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ –≤–∏–¥–µ Java‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤** ‚Äî –æ–ø–∏—Å—ã–≤–∞–µ–º API‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è Feign‚Äë–∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–ª–∏ OpenAPI‚Äë–ø–ª–∞–≥–∏–Ω–æ–≤.    
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: —Ç–æ–ª—å–∫–æ MapStruct, Jakarta Validation –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, Spring‚Äë–≤–µ—â–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –≤ DTO.    

### 2. `user-service-src`
- **Application‚Äë–∫–ª–∞—Å—Å** (`UserServiceApplication.java`) ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞.    
- **`config`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAPI, Actuator, Security (Keycloak, OAuth2) –∏ –¥—Ä.    
- **`controller`** ‚Äî REST‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Spring MVC.    
- **`service`** ‚Äî –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π.    
- **`repository`** ‚Äî Spring Data JPA‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î.    
- **`mapper`** ‚Äî –º–∞–ø–ø–µ—Ä—ã MapStruct, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É `entity` –∏ DTO –∏–∑ API‚Äë–º–æ–¥—É–ª—è.
- **`security`** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≤ —Ç.‚Ää—á. –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Keycloak).    
- **—Ç–µ—Å—Ç—ã** (`/test`) ‚Äî unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–≤–∫–ª—é—á–∞—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ç–∏–≤ JSON‚Äë—Ñ–∞–π–ª–æ–≤ –∏–∑ API‚Äë–º–æ–¥—É–ª—è).    
- **–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: Spring Boot Web, Data JPA, Postgres Driver, Springdoc‚ÄëOpenAPI, Actuator, Kafka (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–æ–±—ã—Ç–∏—è), –∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π ¬´–≤–µ—Å–æ–≤–æ–π¬ª —Å—Ç–µ–∫.    

---
### –ò—Ç–æ–≥
–¢–∞–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:
- **–£–ø—Ä–æ—â–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É**: –∫–æ–º–∞–Ω–¥—ã, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –Ω–∞–¥ API‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç –∫–æ–º–∞–Ω–¥—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.    
- **–ü–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å**: –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–π —Ç–µ—Å—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è.    
- **–£—Å–∫–æ—Ä—è–µ—Ç CI**: –Ω–µ –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É –≤—Å–µ–≥–æ –±–æ–ª—å—à–æ–≥–æ –º–æ–¥—É–ª—è.    

–ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–µ—Ç–∞–ª—è–º –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –∏–ª–∏ –ø—Ä–∏–º–µ—Ä–∞–º –∫–æ–¥–∞, –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!

---
---
---
---
## üìå TL;DR:

‚úÖ **–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –∫—Ä—É–ø–Ω—ã–π, API –ø—É–±–ª–∏—á–Ω–æ–µ –∏–ª–∏ –µ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ ‚Äî –¥–≤—É—Ö–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (`api` + `src`) ‚Äî —ç—Ç–æ –ª—É—á—à–∏–π –≤—ã–±–æ—Ä.**

üö´ –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–µ–±–æ–ª—å—à–æ–π, API –Ω–∏–∫—Ç–æ –∏–∑–≤–Ω–µ –Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç, –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–π —Ç–µ—Å—Ç –Ω–µ –Ω—É–∂–µ–Ω ‚Äî **–æ–¥–∏–Ω –º–æ–¥—É–ª—å –ø—Ä–æ—â–µ, –±—ã—Å—Ç—Ä–µ–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.**

---
## üìä –ü–æ—á–µ–º—É –¥–≤—É—Ö–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è best practice?

### üéØ –ö–æ–≥–¥–∞ –æ–Ω–∞ —Ö–æ—Ä–æ—à–∞:

1Ô∏è‚É£ **–ü—É–±–ª–∏—á–Ω–æ–µ API** ‚Äî –µ—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç (REST, gRPC, Kafka) –∏ —ç—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞–º (–¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–∞–º –∏–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞–º) ‚Äî –≤—ã–Ω–µ—Å—Ç–∏ API –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –ª–æ–≥–∏—á–Ω–æ.  
–ö–ª–∏–µ–Ω—Ç—ã –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç `user-service-api.jar` ‚Üí –∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DTO/—Å–æ–±—ã—Ç–∏—è –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ –∑–∞—Ç—è–≥–∏–≤–∞—è ¬´—Ç—è–∂—ë–ª—ã–π¬ª Spring Boot, JPA, etc.

2Ô∏è‚É£ **–ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã** ‚Äî –µ—Å–ª–∏ –≤—ã –¥–µ–ª–∞–µ—Ç–µ consumer‚Äëdriven tests (CDC, Pact), –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –±—É–¥—É—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API‚Äë–º–æ–¥—É–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ.

3Ô∏è‚É£ **–ë–æ–ª—å—à–∏–µ –∫–æ–º–∞–Ω–¥—ã** ‚Äî –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É:
- –æ–¥–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –≤ `api`,    
- –¥—Ä—É–≥–∏–µ –ø–∏—à—É—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ `src`.    

4Ô∏è‚É£ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å API –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–µ –ª–æ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

5Ô∏è‚É£ **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ —Å 10‚Äì20 —Å–µ—Ä–≤–∏—Å–∞–º–∏ —É–¥–æ–±–Ω–æ –∏–º–µ—Ç—å –æ–±—â–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç API.

---
## üîª –ö–æ–≥–¥–∞ —ç—Ç–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ?
- –ù–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç, API –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑–≤–Ω–µ.    
- –ù–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DTO/—Å–æ–±—ã—Ç–∏–π –≤ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö.    
- –ö–æ–º–∞–Ω–¥–∞ –º–∞–ª–µ–Ω—å–∫–∞—è, –Ω–µ—Ç —Å–º—ã—Å–ª–∞ ¬´—Ä–∞–∑–¥—É–≤–∞—Ç—å¬ª —Å–±–æ—Ä–∫—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É.    

–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ **–æ–¥–∏–Ω –º–æ–¥—É–ª—å** (`src`) ‚Äî –ø—Ä–æ—â–µ –∏ —á–∏—â–µ.

---
## üé® –ß—Ç–æ ¬´–∏–∑—è—â–Ω–µ–µ¬ª?

üëâ –í —Å–º—ã—Å–ª–µ –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞:  
**–æ–¥–∏–Ω –º–æ–¥—É–ª—å ‚Äî –∏–∑—è—â–Ω–µ–µ.**  
‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —Å–æ–±—Ä–∞—Ç—å, –±—ã—Å—Ç—Ä–µ–µ –ø–æ–Ω—è—Ç—å –Ω–æ–≤–∏—á–∫—É, –º–µ–Ω—å—à–µ boilerplate.  
‚úÖ –•–æ—Ä–æ—à–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤, MVP –∏ –Ω–µ–±–æ–ª—å—à–∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

üëâ –í —Å–º—ã—Å–ª–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π —á–∏—Å—Ç–æ—Ç—ã, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ SRP:  
**–¥–≤–∞ –º–æ–¥—É–ª—è ‚Äî –∏–∑—è—â–Ω–µ–µ.**  
‚úÖ –ë–æ–ª–µ–µ ¬´—á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞¬ª.  
‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø—ã separation of concerns, single responsibility —Å–æ–±–ª—é–¥–µ–Ω—ã.  
‚úÖ –£–¥–æ–±–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ.

---
## üìñ –í—ã–≤–æ–¥:

|–ö—Ä–∏—Ç–µ—Ä–∏–π|–û–¥–∏–Ω –º–æ–¥—É–ª—å (`src`)|–î–≤–∞ –º–æ–¥—É–ª—è (`api` + `src`)|
|---|---|---|
|üìê –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–æ–µ–∫—Ç|üëç|üëé –∏–∑–±—ã—Ç–æ—á–Ω–æ|
|üß© –ü—É–±–ª–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç|üëé|üëç|
|üë• –ë–æ–ª—å—à–∞—è –∫–æ–º–∞–Ω–¥–∞|üëé|üëç|
|üîÑ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API|üëé|üëç|
|üöÄ MVP / —Å—Ç–∞—Ä—Ç–∞–ø|üëç|üëé|

---
## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

- **–î–ª—è —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ ‚Äî –¥–≤–∞ –º–æ–¥—É–ª—è.**
    
- **–î–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ‚Äî –æ–¥–∏–Ω.**
	

---
---
---
# üöÄ Roadmap –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥–≤—É—Ö–º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

## üìç –≠—Ç–∞–ø 0: —Å—Ç–∞—Ä—Ç

‚úÖ –í—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ (`user-service`)  
‚úÖ –ü–∞–∫–µ—Ç—ã –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–µ:
```matlab
com.example.userservice
‚îú‚îÄ‚îÄ UserServiceApplication.java
‚îú‚îÄ‚îÄ controller
‚îú‚îÄ‚îÄ service
‚îú‚îÄ‚îÄ repository
‚îú‚îÄ‚îÄ dto
‚îú‚îÄ‚îÄ events
```

**–ß—Ç–æ –≤–∞–∂–Ω–æ —É–∂–µ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ:**
- –î–µ—Ä–∂–∏—Ç–µ **DTO –∏ —Å–æ–±—ã—Ç–∏—è** –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö (`dto`, `events`) –∏ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –Ω–∏—Ö JPA‚Äëentity –Ω–∞–ø—Ä—è–º—É—é.    
- DTO –∏ —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **POJO –±–µ–∑ Spring‚Äë–∞–Ω–Ω–æ—Ç–∞—Ü–∏–π**, –Ω–∏–∫–∞–∫–∏—Ö `@Entity`, `@Service` –∏ —Ç.–ø.    
- –ù–µ –∫–ª–∞–¥–∏—Ç–µ `ResponseEntity`, `Page<UserEntity>` –∏ –ø–æ–¥–æ–±–Ω–æ–µ –≤ DTO ‚Äî —ç—Ç–æ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.    

–ü–æ—á–µ–º—É? üëâ –¢–æ–≥–¥–∞ –ø–æ–∑–∂–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ —ç—Ç–∏ –ø–∞–∫–µ—Ç—ã –ø–æ—á—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å.

---
## üìç –≠—Ç–∞–ø 1: –ø–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑

‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API (REST/gRPC/Kafka).  
‚úÖ –ï—Å—Ç—å –ø–µ—Ä–≤—ã–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–ª–∏ –¥—Ä—É–≥–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à–∏ DTO/—Å–æ–±—ã—Ç–∏—è.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –≤—Å—ë –µ—â—ë –æ–¥–∏–Ω –º–æ–¥—É–ª—å, –Ω–æ –≤—ã **—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç**:
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç–µ DTO –∏ —Å–æ–±—ã—Ç–∏—è (OpenAPI, Avro —Å—Ö–µ–º—ã –∏ —Ç.–¥.)    
- –ü—Ä–æ–≤–æ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã.    

---
## üìç –≠—Ç–∞–ø 2: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é

üî∑ –ü—Ä–∏–∑–Ω–∞–∫–∏, —á—Ç–æ –ø–æ—Ä–∞ —Ä–∞–∑–¥–µ–ª—è—Ç—å:
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤–∞—à–µ–≥–æ API, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω—ã –≤–∞—à–∏ DTO/—Å–æ–±—ã—Ç–∏—è.    
- –í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ, —á—Ç–æ –ø—Ä–∏ –ø—Ä–∞–≤–∫–∞—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (`repository`, `service`) –ª–æ–º–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤.    
- –í—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å API –æ—Ç–¥–µ–ª—å–Ω–æ.    

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç–µ:

‚úÖ –í—ã–Ω–æ—Å–∏—Ç–µ DTO, —Å–æ–±—ã—Ç–∏—è –∏ –ø—Ä–æ–µ–∫—Ü–∏–∏ –≤ **–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –≤—ã–Ω–µ—Å–ª–∏).  
‚úÖ –ü—Ä–æ–≤–æ–¥–∏—Ç–µ —Ä–µ–≤–∏–∑–∏—é: —É–±–∏—Ä–∞–µ—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Spring/JPA –∏ –ª—é–±—ã—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π. 
‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç–µ –º–æ–¥—É–ª—å `user-service-api` –≤ pom.xml:
```xml
<modules>
  <module>user-service-api</module>
  <module>user-service-src</module>
</modules>
```

---
## üìç –≠—Ç–∞–ø 3: –≤—ã–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π

- –°–æ–∑–¥–∞—ë—Ç–µ –ø–∞–ø–∫—É `user-service-api` –∏ –∫–æ–ø–∏—Ä—É–µ—Ç–µ —Ç—É–¥–∞ –ø–∞–∫–µ—Ç—ã `dto`, `events`, `model`, `response`.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π `pom.xml` —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: MapStruct, Validation –∏ —Ç.–¥.    
- –í `user-service-src/pom.xml` —É–±–∏—Ä–∞–µ—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ `dto/events`, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ:
```xml
<dependency>
  <groupId>com.example</groupId>
  <artifactId>user-service-api</artifactId>
  <version>‚Ä¶</version>
</dependency>
```

---
## üìç –≠—Ç–∞–ø 4: —Ñ–∏–∫—Å–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (CDC, Pact) –ø—Ä–æ—Ç–∏–≤ `api`‚Äë–º–æ–¥—É–ª—è.  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:
- –õ—é–±–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–π breaking‚Äëchange –≤ `api` —Ç—Ä–µ–±—É–µ—Ç –º–∞–∂–æ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏.    
- –í `src` –º–æ–∂–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ –ª–æ–º–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤.    

---
## üìç –≠—Ç–∞–ø 5: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ CI, —á—Ç–æ–±—ã `api` –ø—É–±–ª–∏–∫–æ–≤–∞–ª—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (`.jar`) –≤ –≤–∞—à Nexus/Artifactory/MavenCentral.    
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.    

---
# üé® –ò—Ç–æ–≥:

‚úÖ –ù–∞ —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ –Ω–µ —É—Å–ª–æ–∂–Ω—è–µ—Ç–µ ‚Äî –±—ã—Å—Ç—Ä–µ–µ —Å—Ç–∞—Ä—Ç.  
‚úÖ –ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ API ‚Äî –ø–ª–∞–≤–Ω–æ –¥–µ–ª–∞–µ—Ç–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥.  
‚úÖ –í—Å—ë –¥–µ–ª–∞–µ—Ç—Å—è –±–µ–∑ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã—Ö ¬´–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–π¬ª, –µ—Å–ª–∏ –≤—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ DTO/—Å–æ–±—ã—Ç–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---
üí° **–°–æ–≤–µ—Ç:**  
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–≥—É –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å **—á–µ–∫–ª–∏—Å—Ç –ø—Ä–∞–≤–∏–ª –¥–ª—è DTO/—Å–æ–±—ã—Ç–∏–π**, —á—Ç–æ–±—ã –≤—ã —Å—Ä–∞–∑—É –ø–∏—Å–∞–ª–∏ –∏—Ö —Ç–∞–∫, —á—Ç–æ –∏—Ö –ª–µ–≥–∫–æ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ `api` –ø–æ—Ç–æ–º.  

---
---
---
üëç –í–æ—Ç –≤–∞–º **—á–µ–∫–ª–∏—Å—Ç –ø–æ DTO/—Å–æ–±—ã—Ç–∏—è–º (–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º)**, —á—Ç–æ–±—ã –∏—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ **–±–µ–∑–±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ `api`‚Äë–º–æ–¥—É–ª—å** –ø–æ—Ç–æ–º.

–≠—Ç–æ—Ç —á–µ–∫–ª–∏—Å—Ç –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ best practices **—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**, OpenAPI, CDC –∏ –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

---
---
---

# ‚úÖ –ß–ï–ö–õ–ò–°–¢: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ DTO / Event –º–æ–¥–µ–ª–∏

## üóÇÔ∏è üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

üî∑ –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –≤ `src` —Å—Ä–∞–∑—É:
```matlab
com.example.userservice.dto
com.example.userservice.events
com.example.userservice.response
```
–∏ –¥–µ—Ä–∂–∏—Ç–µ DTO –∏ Event –∫–ª–∞—Å—Å—ã **–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç entity –∏ —Å–µ—Ä–≤–∏—Å–æ–≤.**

---

## 1Ô∏è‚É£ **–ò–∑–æ–ª—è—Ü–∏—è –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

‚òëÔ∏è DTO / Event –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç:
- `@Entity`, `@Table`, `@ManyToOne`, `@OneToMany` (JPA –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏)    
- `Page`, `Slice`, `Pageable` –∏–∑ Spring Data    
- `ResponseEntity` –∏–ª–∏ `HttpServletResponse`    
- –∫–∞–∫–∏—Ö‚Äë–ª–∏–±–æ —Å–µ—Ä–≤–∏—Å–æ–≤ (`UserService`, `UserRepository`)    

üëâ DTO = _Plain Old Java Object (POJO)_.

–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```java
public class UserDto {
    private String id;
    private String email;
    private String fullName;
}
```

---
## 2Ô∏è‚É£ **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏**

‚òëÔ∏è –í DTO **–¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è**:
- `@NotNull`, `@Size`, `@Email` (–∏–∑ `jakarta.validation`)    
- `@JsonProperty`, `@JsonInclude` (Jackson)    
- `@Schema` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OpenAPI)    

üö´ **–ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è**:
- `@Service`, `@Component`, `@Repository`    
- `@Transactional`    

---
## 3Ô∏è‚É£ **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è**

‚òëÔ∏è DTO / Event –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–º–∏:
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ `Serializable`, –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∫–ª–∞—Å—Ç—å –≤ Kafka/RabbitMQ    
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Jackson/Avro/Protobuf –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏—Ö.    

---
## 4Ô∏è‚É£ **–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)**

üìñ DTO –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º–∏:
```java
public record UserDto(String id, String email, String fullName) {}
```

–∏–ª–∏ —á–µ—Ä–µ–∑ final‚Äë–ø–æ–ª—è + builder:
```java
public class UserDto {
    private final String id;
    private final String email;
    private final String fullName;
    // getters + builder
}
```

---
## 5Ô∏è‚É£ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**

‚òëÔ∏è DTO / Event –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã –∫ —ç–≤–æ–ª—é—Ü–∏–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@JsonProperty("field_name")` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.    
- –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–µ–ª–∞–π—Ç–µ optional, –Ω–µ –ª–æ–º–∞–π—Ç–µ —Å—Ç–∞—Ä—ã—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.    
- –î–ª—è —Å–æ–±—ã—Ç–∏–π –º–æ–∂–Ω–æ —è–≤–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å `version`.    

---
## 6Ô∏è‚É£ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

‚òëÔ∏è –ê–Ω–Ω–æ—Ç–∏—Ä—É–π—Ç–µ DTO –¥–ª—è OpenAPI/Swagger:
```java
@Schema(description = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")
public class UserDto {
    @Schema(description = "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä", example = "123e4567-e89b-12d3-a456-426614174000")
    private String id;
    ‚Ä¶
}
```

---
## 7Ô∏è‚É£ **–¢–µ—Å—Ç—ã**

‚òëÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ unit‚Äë—Ç–µ—Å—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ DTO –∏ Event.
- `ObjectMapper` ‚Üí JSON ‚Üí –æ–±—Ä–∞—Ç–Ω–æ.    
- Avro/Protobuf —Å—Ö–µ–º—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.    

---
## 8Ô∏è‚É£ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

üìñ –í `api`‚Äë–º–æ–¥—É–ª–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ:
- `jakarta.validation` –∏–ª–∏ `javax.validation`    
- `com.fasterxml.jackson` (–∏–ª–∏ Avro/Protobuf)    
- `io.swagger.core.v3` (–µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç–µ OpenAPI)    
- `org.mapstruct` (–¥–ª—è –º–∞–ø–ø–µ—Ä–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)    

üö´ –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- `spring-boot-starter-web`    
- `spring-boot-starter-data-jpa`    
- `spring-security`    

---
# üéÅ –ë–æ–Ω—É—Å: naming conventions

‚úÖ DTO:
- `UserDto`    
- `UserCreateRequest`, `UserUpdateRequest`    
- `UserResponse`    

‚úÖ Event:
- `UserCreatedEvent`    
- `UserUpdatedEvent`    
- `UserDeletedEvent`    

---
# üìú –ò—Ç–æ–≥

–ï—Å–ª–∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–æ–º—É —á–µ–∫–ª–∏—Å—Ç—É, –≤—ã —É–∂–µ —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –ø–∏—à–µ—Ç–µ DTO –∏ Event —Ç–∞–∫, —á—Ç–æ:
- –º–æ–∂–Ω–æ –±–µ–∑–±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –∏—Ö –≤ `user-service-api`    
- –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å    
- –Ω–µ —Ç–∞—â–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞–º    

---
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–≥—É –∫ —ç—Ç–æ–º—É –µ—â—ë –ø—Ä–∏–ª–æ–∂–∏—Ç—å **—à–∞–±–ª–æ–Ω Maven POM –¥–ª—è `api`‚Äë–º–æ–¥—É–ª—è** –∏ –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞.  
–°–∫–∞–∂–µ—Ç–µ ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é?

---
---
---

‚úÖ –í–æ—Ç –æ–±–µ—â–∞–Ω–Ω—ã–π **—à–∞–±–ª–æ–Ω –¥–ª—è `user-service-api`**: –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `pom.xml`.

---

# üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `user-service-api`
```css
user-service-api/
‚îú‚îÄ‚îÄ pom.xml
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ main/
        ‚îî‚îÄ‚îÄ java/
            ‚îî‚îÄ‚îÄ com/example/userservice/api/
                ‚îú‚îÄ‚îÄ dto/
                ‚îÇ   ‚îú‚îÄ‚îÄ UserDto.java
                ‚îÇ   ‚îú‚îÄ‚îÄ UserCreateRequest.java
                ‚îÇ   ‚îî‚îÄ‚îÄ UserUpdateRequest.java
                ‚îú‚îÄ‚îÄ events/
                ‚îÇ   ‚îú‚îÄ‚îÄ UserCreatedEvent.java
                ‚îÇ   ‚îî‚îÄ‚îÄ UserDeletedEvent.java
                ‚îî‚îÄ‚îÄ model/
                    ‚îî‚îÄ‚îÄ BaseEntityModel.java
```

üí° _–ü–æ –∂–µ–ª–∞–Ω–∏—é –º–æ–∂–Ω–æ –µ—â—ë –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç `response/` –∏–ª–∏ `exception/` –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ API._

---
# üìÑ –ü—Ä–∏–º–µ—Ä `pom.xml` –¥–ª—è `user-service-api`
```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>user-service-api</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>user-service-api</name>
    <description>API module with DTOs and Events for User Service</description>

    <dependencies>

        <!-- Jakarta Bean Validation -->
        <dependency>
            <groupId>jakarta.validation</groupId>
            <artifactId>jakarta.validation-api</artifactId>
            <version>3.0.2</version>
        </dependency>

        <!-- Jackson annotations -->
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-annotations</artifactId>
            <version>2.16.1</version>
        </dependency>

        <!-- OpenAPI (optional, for annotations) -->
        <dependency>
            <groupId>io.swagger.core.v3</groupId>
            <artifactId>swagger-annotations</artifactId>
            <version>2.2.21</version>
            <scope>provided</scope>
        </dependency>

        <!-- MapStruct (optional, for mappers) -->
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct</artifactId>
            <version>1.5.5.Final</version>
            <scope>provided</scope>
        </dependency>

    </dependencies>

    <build>
        <plugins>

            <!-- Compiler -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.11.0</version>
                <configuration>
                    <source>17</source>
                    <target>17</target>
                </configuration>
            </plugin>

        </plugins>
    </build>

</project>

```

---
# üìú –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

‚úÖ `packaging` ‚Äî `jar`, –±–µ–∑ Spring Boot –ø–ª–∞–≥–∏–Ω–∞.  
‚úÖ –¢–æ–ª—å–∫–æ –ª—ë–≥–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`jakarta.validation`, `jackson-annotations`, `swagger-annotations`, `mapstruct`).  
‚úÖ –í –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ —ç—Ç–æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ DTO/Events –±–µ–∑ ¬´—É—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è¬ª Spring Boot –∏ JPA.

---
# üìÇ –ü—Ä–∏–º–µ—Ä –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (`user-service-src`):
```xml
<dependency>
    <groupId>com.example</groupId>
    <artifactId>user-service-api</artifactId>
    <version>1.0.0-SNAPSHOT</version>
</dependency>
```

---

