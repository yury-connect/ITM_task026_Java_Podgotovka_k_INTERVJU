**ELK-—Å—Ç—ç–∫**¬†‚Äî —ç—Ç–æ <u>–Ω–∞–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–ª—è —Å–±–æ—Ä–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è, –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</u>. –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –æ—Ç –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤ –≤—Ö–æ–¥—è—â–∏—Ö –≤ –Ω–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- **E**lasticsearch    
- **L**ogstash    
- **K**ibana    

–°–µ–π—á–∞—Å –≤ —Å—Ç—ç–∫ —á–∞—Å—Ç–æ –≤–∫–ª—é—á–∞—é—Ç¬†**Beats**, –∏ —Ç–æ–≥–¥–∞ –µ–≥–æ –Ω–∞–∑—ã–≤–∞—é—Ç¬†**Elastic Stack**¬†(–∏–ª–∏¬†**ELK+Beats**).

---
## üîπ¬†**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ELK-—Å—Ç—ç–∫–∞**

### 1.¬†**Elasticsearch**
#### üîπ¬†_–ß—Ç–æ —ç—Ç–æ?_  
–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è¬†**–ø–æ–∏—Å–∫–æ–≤–∞—è –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è NoSQL-–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**¬†–Ω–∞ –æ—Å–Ω–æ–≤–µ *Apache Lucene*.  
#### üîπ¬†_–ó–∞—á–µ–º?_
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ª–æ–≥–æ–≤, –º–µ—Ç—Ä–∏–∫, –ª—é–±—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö/–ø–æ–ª—É—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.    
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫.    
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ).    

### 2.¬†**Logstash**
#### üîπ¬†_–ß—Ç–æ —ç—Ç–æ?_  
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è¬†**–ø—Ä–∏–µ–º–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö**¬†(*ETL-–ø–∞–π–ø–ª–∞–π–Ω*).  
#### üîπ¬†_–ó–∞—á–µ–º?_
- –ü–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ Nginx, Spring Boot, Docker).    
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏–∑ JSON).    
- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Elasticsearch –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.    

### 3.¬†**Kibana**
#### üîπ¬†_–ß—Ç–æ —ç—Ç–æ?_  
–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è¬†**–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö**¬†–∏–∑ Elasticsearch.  
#### üîπ¬†_–ó–∞—á–µ–º?_
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ (–≥—Ä–∞—Ñ–∏–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, –∫–∞—Ä—Ç—ã).    
- –ì–∏–±–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º, –º–µ—Ç—Ä–∏–∫–∞–º, —Ç—Ä–µ–π—Å–∞–º —á–µ—Ä–µ–∑ Query Language (KQL).    
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 500 –≤ –ª–æ–≥–∞—Ö). 
- –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏: ¬´**–∫—Ä–∞—Å–∏–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞**¬ª –¥–ª—è –æ–≥—Ä–æ–º–Ω–æ–≥–æ –æ–±—ä—ë–º–∞ –ª–æ–≥–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∏—Å–∫–∞.

### 4.¬†**Beats**¬†(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
#### üîπ¬†_–ß—Ç–æ —ç—Ç–æ?_  
–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –¥–ª—è¬†**—Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**¬†—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.  
#### üîπ¬†_–û—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥—ã:_
- **Filebeat**¬†‚Äî —Å–±–æ—Ä –ª–æ–≥–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤.    
- **Metricbeat**¬†‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (CPU, –ø–∞–º—è—Ç—å, Docker, Kafka).    
- **Packetbeat**¬†‚Äî –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞.    

---
## üîπ¬†**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ELK?**

1. **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**¬†(–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–µ—Ä–≤–µ—Ä—ã) ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –ª–æ–≥–∏ –≤¬†**Logstash**¬†–∏–ª–∏¬†**Beats**.    
2. **Logstash**¬†–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ–ª—è –∏–∑ –ª–æ–≥–æ–≤ Nginx) ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤¬†**Elasticsearch**.    
3. **Elasticsearch**¬†–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –∏ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ.    
4. **Kibana**¬†–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤, —Ç–∞–±–ª–∏—Ü –∏–ª–∏ –∫–∞—Ä—Ç.    

---
## üîπ¬†**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### 1.¬†**–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ Spring Boot**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∏—à–µ—Ç –ª–æ–≥–∏ –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ.    
- Filebeat –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ Logstash.    
- Logstash –ø–∞—Ä—Å–∏—Ç –∏ –æ–±–æ–≥–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ¬†`service: "backend"`).    
- –í Kibana –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–æ –ø–æ–ª—é¬†`level: "ERROR"`.    

### 2.¬†**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Nginx**
- Logstash –ø–∞—Ä—Å–∏—Ç access-–ª–æ–≥–∏, –∏–∑–≤–ª–µ–∫–∞—è:    
    - IP-–∞–¥—Ä–µ—Å–∞.        
    - HTTP-—Å—Ç–∞—Ç—É—Å—ã.        
    - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞.        
- –í Kibana —Å—Ç—Ä–æ–∏—Ç—Å—è –¥–∞—à–±–æ—Ä–¥ —Å:    
    - –ì—Ä–∞—Ñ–∏–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ 500-—Ö –æ—à–∏–±–æ–∫.        
    - –¢–æ–ø–æ–º —Å–∞–º—ã—Ö –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.        

### 3.¬†**–ê–ª–µ—Ä—Ç–∏–Ω–≥ –Ω–∞ –∞–Ω–æ–º–∞–ª–∏–∏**
- Kibana Alerting –∏–ª–∏ ElastAlert –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack –ø—Ä–∏:    
    - –†–µ–∑–∫–æ–º —Ä–æ—Å—Ç–µ –æ—à–∏–±–æ–∫.        
    - –ù–µ–æ–±—ã—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–∞–Ω—ã —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π).        

---
## üîπ¬†**–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ELK**

### 1.¬†**Docker-–≤–µ—Ä—Å–∏—è (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)**
```bash
git clone https://github.com/deviantony/docker-elk.git
cd docker-elk
docker-compose up -d
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- Kibana:¬†`http://localhost:5601`    
- Elasticsearch:¬†`http://localhost:9200`    

### 2.¬†**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Filebeat –¥–ª—è —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤**
–ö–æ–Ω—Ñ–∏–≥¬†`filebeat.yml`:
```yaml
filebeat.inputs:
  - type: filestream
    paths:
      - /var/log/nginx/access.log

output.logstash:
  hosts: ["logstash:5044"]
```

### 3.¬†**–ö–æ–Ω—Ñ–∏–≥ Logstash –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤**¬†(`pipeline.conf`):
```plaintext
input {
  beats {
    port => 5044
  }
}

filter {
  grok {
    match => { "message" => "%{COMBINEDAPACHELOG}" }  # –ü–∞—Ä—Å–∏–Ω–≥ Nginx-–ª–æ–≥–æ–≤
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "nginx-logs-%{+YYYY.MM.dd}"
  }
}
```

---
## üîπ¬†**–ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã ELK**

### ‚úÖ¬†**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª–æ–≥–æ–≤, –º–µ—Ç—Ä–∏–∫, –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏.    
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Elasticsearch —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.    
- **–û—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥**¬†(–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è).    

### ‚ùå¬†**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –¢—Ä–µ–±—É–µ—Ç —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–µ—Ä–æ–≤ (Grok –≤ Logstash).    
- **–†–µ—Å—É—Ä—Å–æ–µ–º–∫–æ—Å—Ç—å**: Elasticsearch –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏.    
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏**: X-Pack (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∞–ª–µ—Ä—Ç—ã) —Ç—Ä–µ–±—É–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏.    

---
## üîπ¬†**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã ELK**

- **Grafana Loki**¬†(+ Promtail) ‚Äî –æ–±–ª–µ–≥—á–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ª–æ–≥–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Grafana.    
- **Splunk**¬†‚Äî –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–æ–≥ —Å –º–æ—â–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.    
- **Graylog**¬†‚Äî –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤.

---
## **–í—ã–≤–æ–¥**

ELK-—Å—Ç—ç–∫ ‚Äî —ç—Ç–æ:  
üìä¬†**–ú–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö**.  
üîç¬†**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**.  
üõ†¬†**–ì–∏–±–∫–æ—Å—Ç—å**¬†(–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è DevOps, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤).

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ¬†**—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ª–æ–≥–æ–≤ —Å —É–¥–æ–±–Ω—ã–º –ø–æ–∏—Å–∫–æ–º**¬†‚Äî ELK –∏–¥–µ–∞–ª–µ–Ω! üöÄ