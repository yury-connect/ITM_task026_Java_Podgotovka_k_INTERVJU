### **ClickHouse โ ะบัะฐัะบะพ**

**ะงัะพ ััะพ?**  
โก๏ธย**ะฃะปัััะฐะฑััััะฐั ะบะพะปะพะฝะพัะฝะฐั ะกะฃะะ**ยะดะปั ะฐะฝะฐะปะธัะธะบะธ (OLAP) ะธ ะฑะพะปััะธั ะดะฐะฝะฝัั.

**ะะฐัะตะผ?**
- ะะฝะฐะปะธะทย**ะผะธะปะปะธะฐัะดะพะฒ ัััะพะบ**ยะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ.    
- **ะััะพะบะฐั ัะบะพัะพััั**ยะทะฐะฟัะพัะพะฒ (ะฒ 100-1000 ัะฐะท ะฑััััะตะต ะบะปะฐััะธัะตัะบะธั ะกะฃะะ).    
- **ะะฐัััะฐะฑะธััะตะผะพััั**ยะดะปั `petabyte-scale` ะดะฐะฝะฝัั.    

**ะะดะต ะธัะฟะพะปัะทััั?**  
โ ะะฝะฐะปะธัะธะบะฐ (`ะฏะฝะดะตะบั.ะะตััะธะบะฐ`, `Cloudflare`).  
โ ะะพะณะธ ะธ ัะพะฑััะธั (`ััะตะบะธะฝะณ`, `ะฐัะดะธั`).  
โ ะคะธะฝะฐะฝัะพะฒัะต ะพััะตัั.

---
### **ClickHouse โ ะฟะพะดัะพะฑะฝะพ**

#### ๐นย**1. ะัะพะฑะตะฝะฝะพััะธ ะฐััะธัะตะบัััั**
- **ะะพะปะพะฝะพัะฝะพะต ััะฐะฝะตะฝะธะต**  
    ะะฐะฝะฝัะต ััะฐะฝัััั ะฟะพ ััะพะปะฑัะฐะผ, ะฐ ะฝะต ัััะพะบะฐะผ. ะญัะพ ััะบะพััะตั ะฐะณัะตะณะฐัะธั (ะฝะฐะฟัะธะผะตั,ย`SUM(sales)`).    
- **ะกะถะฐัะธะต ะดะฐะฝะฝัั**  
    ะญะบะพะฝะพะผะธั ะดะพ 90% ะผะตััะฐ (ะฝะฐะฟัะธะผะตั, ัะธัะปะฐ ััะฐะฝัััั ะฒ ะฑะธะฝะฐัะฝะพะผ ัะพัะผะฐัะต).    
- **ะะฐัะฟัะตะดะตะปะตะฝะฝัะต ะทะฐะฟัะพัั**  
    ะะฐะฟัะพัั ะฒัะฟะพะปะฝััััั ะฟะฐัะฐะปะปะตะปัะฝะพ ะฝะฐ ะฝะตัะบะพะปัะบะธั ัะตัะฒะตัะฐั (ัะฐัะดะธัะพะฒะฐะฝะธะต).    
- **ะััััััะฒะธะต ััะฐะฝะทะฐะบัะธะน**  
    ะะต ะฟะพะดัะพะดะธั ะดะปั OLTP (ะฑะฐะฝะบะพะฒัะบะธั ะพะฟะตัะฐัะธะน), ะฝะพ ะธะดะตะฐะปะตะฝ ะดะปั ะฐะฝะฐะปะธัะธะบะธ.    

#### ๐นย**2. ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ**
- **ะะพะดะดะตัะถะบะฐ SQL**  
    ะะฝะฐะบะพะผัะน ัะธะฝัะฐะบัะธั + ัะฐััะธัะตะฝะธั ะดะปั ะฐะฝะฐะปะธัะธะบะธ:
```sql
SELECT 
    toStartOfHour(event_time) AS hour,
    count() AS page_views
FROM events
GROUP BY hour
ORDER BY hour
```

- **ะะฐัะตัะธะฐะปะธะทะพะฒะฐะฝะฝัะต ะฟัะตะดััะฐะฒะปะตะฝะธั**  
    ะะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตััะตั ะฐะณัะตะณะฐัะพะฒ ะฟัะธ ะฒััะฐะฒะบะต ะดะฐะฝะฝัั.    
- **ะะฝัะตะณัะฐัะธะธ**  
    โย**Kafka**: ะะพัะพะบะพะฒัะน ะฟัะธะตะผ ะดะฐะฝะฝัั.  
    โย**S3**: ะฅัะฐะฝะตะฝะธะต ัะพะปะพะดะฝัั ะดะฐะฝะฝัั.  
    โย**Grafana**: ะะธะทัะฐะปะธะทะฐัะธั.    

#### ๐นย**3. ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ**
- **ะะฝะฐะปะธะท ะปะพะณะพะฒ Nginx**
```sql
SELECT 
    status,
    count() AS requests
FROM nginx_logs
WHERE date = today()
GROUP BY status
```

**ะคะธะฝะฐะฝัะพะฒัะน ะพััะตั**
```sql
SELECT 
    product,
    sum(revenue) AS total_revenue,
    avg(price) AS avg_price
FROM sales
GROUP BY product
HAVING total_revenue > 10000
```

#### ๐นย**4. ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั**
- **ะกัะฐะฒะฝะตะฝะธะต ั ะบะพะฝะบััะตะฝัะฐะผะธ**ย(ะฝะฐ ะดะฐะฝะฝัั 1 ะผะปัะด ัััะพะบ):

| ะกะฃะะ       | ะัะตะผั ะทะฐะฟัะพัะฐย`GROUP BY` |
| :--------- | :----------------------- |
| ClickHouse | **0.5 ัะตะบ**              |
| PostgreSQL | 120 ัะตะบ                  |
| MySQL      | 300+ ัะตะบ                 |
   
#### ๐นย**5. ะฃััะฐะฝะพะฒะบะฐ**

**Docker-ะฒะตััะธั:**
```bash
docker run -d --name clickhouse-server -p 8123:8123 clickhouse/clickhouse-server
```

**ะะพะดะบะปััะตะฝะธะต:**
```bash
clickhouse-client
```

#### ๐นย**6. ะะปััั ะธ ะผะธะฝััั**

โย**ะะปััั:**
- ะกะบะพัะพััั (ะพะฑัะฐะฑะฐััะฒะฐะตัย**ะผะธะปะปะธะฐัะดั ัััะพะบ/ัะตะบ**).    
- ะญััะตะบัะธะฒะฝะพะต ัะถะฐัะธะต.    
- ะัะพััะพัะฐ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั.    

โย**ะะธะฝััั:**
- ะะตั ััะฐะฝะทะฐะบัะธะน.    
- ะกะปะพะถะฝัะต JOIN (ะปัััะต ะธะทะฑะตะณะฐัั).    
- ะขัะตะฑัะตั ะพะฟัะธะผะธะทะฐัะธะธ ะฟะพะด ะฝะฐะณััะทะบั.    

---
### **ะัะฒะพะด**

`ClickHouse` โ ััะพย**ยซะผะพะปะฝะธัยป ะฒ ะผะธัะต ะฐะฝะฐะปะธัะธะบะธ**ยโก:
- ะัะปะธ ะฝัะถะฝะพย**ะฐะฝะฐะปะธะทะธัะพะฒะฐัั ัะตัะฐะฑะฐะนัั ะดะฐะฝะฝัั**ยโ ะพะฝ ะพะฑะณะพะฝะธั ะบะปะฐััะธัะตัะบะธะต ะกะฃะะ ะฒ 100 ัะฐะท.    
- ะะพะดัะพะดะธั ะดะปัย**ะปะพะณะพะฒ, ะผะตััะธะบ, ัะธะฝะฐะฝัะพะฒัั ะพััะตัะพะฒ**.    
- ะะต ะดะปั ััะฐะฝะทะฐะบัะธะน, ะฝะพ ะดะปั ะฐะฝะฐะปะธัะธะบะธ โ ะปัััะธะน ะฒัะฑะพั.    

**ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**

> ะกะตัะฒะธั ะฐะฝะฐะปะธัะธะบะธ ะพะฑัะฐะฑะฐััะฒะฐะตั 10 ะผะปัะด ัะพะฑััะธะน ะฒ ะดะตะฝั? ClickHouse ัะดะตะปะฐะตั ััะพย**ะทะฐ ัะตะบัะฝะดั**, ะฐ PostgreSQL โ ะทะฐ ัะฐัั.

ะะพะฟัะพะฑัะนัะต:ย[clickhouse.com](https://clickhouse.com/)ย๐


