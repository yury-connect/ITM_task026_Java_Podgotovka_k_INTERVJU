## üóë G1 GC (Garbage First)
GC <u>–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</u> –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Java Virtual Machine.

---
# ü•á –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è
**Heap** –¥–µ–ª–∏—Ç—Å—è –Ω–µ –Ω–∞ 2 –æ–±–ª–∞—Å—Ç–∏ (Young/Old), –∞ –Ω–∞ **–º–Ω–æ–≥–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤**.
üëâ G1 —Å–æ–±–∏—Ä–∞–µ—Ç **—Å–∞–º—ã–µ ¬´–º—É—Å–æ—Ä–Ω—ã–µ¬ª —Ä–µ–≥–∏–æ–Ω—ã —Å–Ω–∞—á–∞–ª–∞** (Garbage First).

---
# üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
### Heap ‚Üí –Ω–∞–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–æ–≤ (–æ–±—ã—á–Ω–æ `1`‚Äì`32`MB)
> –¢–∏–ø—ã —Ä–µ–≥–∏–æ–Ω–æ–≤:
> - Eden    
> - Survivor    
> - Old    
> - Humongous (–∫—Ä—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã)    

---
# üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1Ô∏è‚É£ Young GC
> - –ß–∏—Å—Ç–∏—Ç—Å—è Eden    
> - –ö–æ—Ä–æ—Ç–∫–∏–µ Stop-the-World –ø–∞—É–∑—ã    
> - –ë—ã—Å—Ç—Ä–æ    
### 2Ô∏è‚É£ Concurrent Mark
> - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ–º–µ—á–∞–µ—Ç –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ Old    
> - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—É–∑—ã    
### 3Ô∏è‚É£ Mixed GC
> - –ß–∏—Å—Ç–∏—Ç —á–∞—Å—Ç—å Old + Young    
> - –í—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–≥–∏–æ–Ω—ã —Å –º–∞–∫—Å–∏–º—É–º–æ–º –º—É—Å–æ—Ä–∞    

---
# ‚è± –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å

üëâ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –ø–∞—É–∑—ã**
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑:
**`-XX:MaxGCPauseMillis=200`**
> G1 –ø—ã—Ç–∞–µ—Ç—Å—è —É–ª–æ–∂–∏—Ç—å—Å—è –≤ –∑–∞–¥–∞–Ω–Ω—ã–π *target*.

---
# ‚öô –ü–ª—é—Å—ã
> ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π latency  
> ‚úÖ –•–æ—Ä–æ—à –¥–ª—è –±–æ–ª—å—à–∏—Ö heap (>4‚Äì8GB)  
> ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞  
> ‚úÖ –ú–µ–Ω—å—à–µ full GC

---
# ‚ö† –ú–∏–Ω—É—Å—ã
> ‚ùå –°–ª–æ–∂–Ω–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞  
> ‚ùå –ù–µ–º–Ω–æ–≥–æ –≤—ã—à–µ CPU overhead  
> ‚ùå Humongous –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å heap

---
# üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

|–°—Ü–µ–Ω–∞—Ä–∏–π|–ü–æ–¥—Ö–æ–¥–∏—Ç?|
|---|---|
|–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã|–î–∞|
|–ë–æ–ª—å—à–æ–π heap|–î–∞|
|–ù–∏–∑–∫–∞—è latency|–î–∞|
|Real-time|–ù–µ—Ç|

---
# üß† –ö–∞–∫ –∑–∞–ø–æ–º–Ω–∏—Ç—å

**CMS** ‚Üí –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—É–∑—ã  
**Parallel** ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π throughput  
**G1** ‚Üí –±–∞–ª–∞–Ω—Å + –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å

---
