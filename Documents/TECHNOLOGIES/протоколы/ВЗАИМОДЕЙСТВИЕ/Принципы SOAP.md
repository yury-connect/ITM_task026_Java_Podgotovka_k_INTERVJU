Давайте разберем SOAP (Simple Object Access Protocol) — это важный протокол для обмена структурированной информацией в веб-сервисах.

### Что такое SOAP? Простыми словами

Представьте, что вы отправляете официальное заказное письмо с строго определенной формой.

- **Вы (клиент)** — хотите получить услугу или информацию
    
- **Почтовый сервис (транспорт)** — способ доставки (HTTP, SMTP и др.)
    
- **Конверт (SOAP-обертка)** — стандартный формат, в который упаковано ваше сообщение
    
- **Бланк заявления (XML-структура)** — строго определенная форма с данными
    
- **Получатель (сервер)** — обрабатывает запрос по строгим правилам
    

SOAP — это **строгий протокол** с официальными стандартами, в отличие от архитектурного стиля REST.

---

### Ключевые характеристики SOAP

#### 1. Протокол, а не архитектурный стиль

SOAP — это официальный протокол с W3C-спецификацией. Он определяет:

- Структуру XML-сообщения
    
- Правила обработки сообщений
    
- Механизмы ошибок
    
- Спецификации безопасности
    

#### 2. Строгая структура сообщения

Каждое SOAP-сообщение — это XML-документ с определенной структурой:
```xml
<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope/">
  <soap:Header>
    <!-- Опциональные заголовки: безопасность, routing и т.д. -->
    <wsse:Security xmlns:wsse="...">
      <wsse:UsernameToken>
        <wsse:Username>myuser</wsse:Username>
        <wsse:Password>mypass</wsse:Password>
      </wsse:UsernameToken>
    </wsse:Security>
  </soap:Header>
  
  <soap:Body>
    <!-- Основное содержимое сообщения -->
    <m:GetUser xmlns:m="http://example.com/webservice">
      <m:UserID>123</m:UserID>
    </m:GetUser>
  </soap:Body>
</soap:Envelope>
```

#### 3. Независимость от транспорта

SOAP может работать поверх различных протоколов:

- **HTTP** (наиболее распространенный)
    
- **SMTP** (электронная почта)
    
- **TCP**
    
- **JMS**
    

#### 4. Встроенная безопасность

SOAP имеет собственные стандарты безопасности:

- **WS-Security** — для шифрования и цифровых подписей
    
- **WS-Addressing** — для маршрутизации сообщений
    
- **WS-ReliableMessaging** — для гарантированной доставки
    

#### 5. Строгая типизация и контракты

Работа с SOAP требует четкого определения контракта через **WSDL (Web Services Description Language)**.

---

### WSDL — контракт веб-сервиса

WSDL — это XML-документ, который описывает:

- **Что** сервис может делать (операции)
    
- **Как** к нему обращаться (формат сообщений)
    
- **Где** его найти (адрес конечной точки)
    

**Аналогия:** WSDL — это как описание API в мире SOAP. Он генерируется автоматически и используется клиентами для понимания, как взаимодействовать с сервисом.

### Как выглядит полный цикл взаимодействия?

**1. Клиент получает WSDL** сервиса  
**2. На основе WSDL генерируется клиентский код**  
**3. Клиент отправляет SOAP-запрос:**

```xml
POST /UserService HTTP/1.1
Host: example.com
Content-Type: application/soap+xml; charset=utf-8
Content-Length: 300

<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope/">
  <soap:Body>
    <m:GetUserDetails xmlns:m="http://example.com/webservice">
      <m:UserID>456</m:UserID>
    </m:GetUserDetails>
  </soap:Body>
</soap:Envelope>
```

**4. Сервер обрабатывает запрос и возвращает SOAP-ответ:**
```xml

```




