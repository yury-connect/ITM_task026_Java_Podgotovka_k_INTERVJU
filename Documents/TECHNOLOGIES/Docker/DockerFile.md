**Минимальный Dockerfile** — файл с инструкциями для создания минимального образа, содержащего только самое необходимое для работы приложения.
## Пример минимального **Dockerfile**:
```dockerfile
# Используем минимальный базовый образ
FROM alpine:latest

# Копируем готовый бинарник в образ
COPY my-app /usr/local/bin/

# Команда запуска по умолчанию
CMD ["my-app"]
```
### Что обязательно в минимальном наборе:
1. **`FROM`** - указание базового образа    
    - `alpine` (∼5 МБ) - самый популярный минимальный вариант        
    - `scratch` - полностью пустой образ (0 МБ)    
2. **`COPY`** - копирование файлов в образ    
    - Только необходимые файлы приложения        
    - Скомпилированный бинарник (не исходный код!)    
3. **`CMD`** или **`ENTRYPOINT`** - команда запуска

> **Ключевой принцип:** минимальный образ = минимальный базовый образ + только необходимые файлы + одна команда запуска.

---
## Типичный **Dockerfile** для **Spring Boot** приложения:
```dockerfile
# 1. Базовый образ с JDK (обычно используют официальные образы OpenJDK)
FROM eclipse-temurin:17-jre-alpine

# 2. Устанавливаем рабочую директорию
WORKDIR /app

# 3. Копируем JAR-файл приложения
COPY target/*.jar app.jar

# 4. Создаем непривилегированного пользователя для безопасности
RUN addgroup -S spring && adduser -S spring -G spring
USER spring

# 5. Открываем порт (опционально, для документации)
EXPOSE 8080

# 6. Команда запуска приложения
ENTRYPOINT ["java", "-jar", "/app/app.jar"]
```

### Оптимизированная версия с многостадийной сборкой:
```dockerfile
# Стадия сборки
FROM eclipse-temurin:17-jdk-alpine as builder
WORKDIR /app
COPY . .
RUN ./mvnw clean package -DskipTests

# Финальная стадия
FROM eclipse-temurin:17-jre-alpine
WORKDIR /app
COPY --from=builder /app/target/*.jar app.jar

RUN addgroup -S spring && adduser -S spring -G spring
USER spring

EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

### Ключевые особенности:
1. **Базовый образ** - `eclipse-temurin:17-jre-alpine` (минимальный образ с JRE)
    
2. **Безопасность** - запуск от непривилегированного пользователя
    
3. **JAR-файл** - копируется уже собранный артефакт
    
4. **Порт** 8080 - стандартный порт Spring Boot
    
5. **Команда запуска** - `java -jar` для исполнения JAR-файла
    

**Размер итогового образа:** ∼150-200 МБ (вместо ∼500 МБ с JDK)



