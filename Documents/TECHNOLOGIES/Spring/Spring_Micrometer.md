**Spring Micrometer**¬†‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–±–æ—Ä–∞¬†**–º–µ—Ç—Ä–∏–∫**¬†(metrics) –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö `Spring Boot`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π **API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, —Ç–∞–∫–∏–º–∏ –∫–∞–∫¬†**Prometheus, Grafana, Datadog, InfluxDB**¬†–∏ –¥—Ä—É–≥–∏–º–∏.

**`Micrometer`** –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫¬†**—Ñ–∞—Å–∞–¥**¬†(*–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è*) –Ω–∞–¥ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –ø–æ–∑–≤–æ–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø–∏—Å–∞—Ç—å –∫–æ–¥ –æ–¥–∏–Ω —Ä–∞–∑, –∞ –∑–∞—Ç–µ–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å –Ω—É–∂–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.

---
### üîπ¬†**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Micrometer**
1. **–°–±–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫**:    
    - **JVM** *(–ø–∞–º—è—Ç—å, –ø–æ—Ç–æ–∫–∏, —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞)*        
    - **HTTP-–∑–∞–ø—Ä–æ—Å—ã** *(—á–µ—Ä–µ–∑¬†`Spring MVC`¬†–∏–ª–∏¬†`WebFlux`)*        
    - **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** *(HikariCP, JDBC, R2DBC)*        
    - **–ö—ç—à–∏** *(Ehcache, Caffeine, Redis)*    
2. **–ì–∏–±–∫–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞**:    
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞¬†**Prometheus**,¬†**Graphite**,¬†**InfluxDB**,¬†**Datadog**,¬†**New Relic**¬†–∏ –¥—Ä.    
3. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:    
    - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Å—á–µ—Ç—á–∏–∫–∏ (`Counter`), —Ç–∞–π–º–µ—Ä—ã (`Timer`), –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã (`DistributionSummary`).    
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Spring Actuator**:    
    - Endpoint¬†`/actuator/metrics`¬†–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Micrometer` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.    

---
### üîπ¬†**–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Micrometer?**
1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤¬†`pom.xml`¬†(Maven) –∏–ª–∏¬†`build.gradle`¬†(`Gradle`):
```xml
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-core</artifactId>
</dependency>
```

2. –î–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (*–Ω–∞–ø—Ä–∏–º–µ—Ä, `Prometheus`*):
```xml
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-registry-prometheus</artifactId>
</dependency>
```

3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤¬†`application.yml`:
```yaml
management:
  endpoints:
    web:
      exposure:
        include: health, info, metrics, prometheus
  metrics:
    export:
      prometheus:
        enabled: true
```

---
### üîπ¬†**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

#### 1.¬†**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (JVM, HTTP-–∑–∞–ø—Ä–æ—Å—ã)**
–î–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.  
–ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤:
- `http://localhost:8080/actuator/metrics`    
- `http://localhost:8080/actuator/prometheus`¬†*(–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω Prometheus)*    

#### 2.¬†**–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫**
```java
import io.micrometer.core.instrument.Counter;
import io.micrometer.core.instrument.MeterRegistry;

@Service
public class MyService {
    private final Counter myCounter;

    public MyService(MeterRegistry registry) {
        myCounter = Counter.builder("my.custom.counter")
            .description("Counts something important")
            .register(registry);
    }

    public void doSomething() {
        myCounter.increment();
    }
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ¬†`doSomething()`¬†—Å—á–µ—Ç—á–∏–∫ –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è, –∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–≤–∏–¥–µ—Ç—å –≤¬†`/actuator/metrics`.

---
### üîπ¬†**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus + Grafana**
1. Micrometer —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞–µ—Ç¬†**Prometheus**.    
2. Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å¬†`/actuator/prometheus`).    
3. **Grafana**¬†–≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ Prometheus.    

–ü—Ä–∏–º–µ—Ä –¥–∞—à–±–æ—Ä–¥–∞ –≤ Grafana:  
[https://miro.medium.com/max/1400/1*QY2Oq7v7yXbR6JhA6ZQJvA.png](https://miro.medium.com/max/1400/1*QY2Oq7v7yXbR6JhA6ZQJvA.png)

---

### üîπ¬†**–ü–æ—á–µ–º—É Micrometer –ª—É—á—à–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ Actuator?**

- Actuator –¥–∞–µ—Ç¬†**–±–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**, –Ω–æ Micrometer –ø–æ–∑–≤–æ–ª—è–µ—Ç:
    
    - –ì–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã.
        
    - –î–æ–±–∞–≤–ª—è—Ç—å¬†**—Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏**¬†(–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã).
        
    - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å¬†**Prometheus, Grafana**¬†–¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
        

---

### **–í—ã–≤–æ–¥**

Micrometer ‚Äî —ç—Ç–æ¬†**–º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**¬†Spring Boot-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π:  
‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫.  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±—ç–∫–µ–Ω–¥–æ–≤.  
‚úÖ –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Spring Actuator.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ¬†**–Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Ç—Ä–∏–∫–∏, –∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –≤ Prometheus/Grafana**¬†‚Äî Micrometer –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç! üìäüöÄ



