# **Оркестратор vs. Хореограф в микросервисах**

#### **1. Оркестратор**
**Кто:**
- **Центральный сервис** (*например, `Order Service` в системе заказов*).    
- **Специальный движок** (`Camunda`, `AWS Step Functions`, `Temporal`).    

**Как работает:**
- Полностью **контролирует** процесс.    
- Последовательно **вызывает** другие сервисы.    
- **Реагирует на ошибки** (*запускает компенсации*).    

**Пример:**
```text
Order Service → (1) Payment Service → (2) Inventory Service → (3) Notification Service
```

**Когда использовать:**
- Сложные бизнес-процессы с четкими шагами.    
- Когда нужен **полный контроль** и мониторинг.    

---
#### **2. Хореограф**
**Кто:**
- **Сами сервисы** через события (Kafka, RabbitMQ).    
- **Брокер сообщений** (выступает как "невидимый дирижер").    

**Как работает:**
- Сервисы **не знают** друг о друге.    
- Подписываются на **события** (например, `OrderPlaced`, `PaymentProcessed`).    
- **Автономны** (каждый решает, как реагировать).    

**Пример:**
```text
Order Service → "OrderPlaced" → Payment Service → "PaymentProcessed" → Inventory Service  
```

**Когда использовать:**
- Высокая **слабая связанность**.    
- Гибкость (можно легко добавлять/удалять сервисы).    

---
### **Сравнение**

|**Критерий**|**Оркестратор**|**Хореограф**|
|---|---|---|
|**Контроль**|Централизованный|Децентрализованный|
|**Сложность**|Проще отладка|Сложнее отслеживать поток|
|**Масштабируемость**|Может стать узким местом|Легко масштабируется|
|**Гибкость**|Изменения сложнее|Новые сервисы добавляются легко|

---
### **Кто выбирает?**
- **Оркестратор:** Банки, ERP-системы (*где важен **контроль***).    
- **Хореограф:** *E-commerce*, стриминги (*где важна **скорость** и **гибкость***).    

**Компромисс:** Иногда используют **гибрид** (*например, оркестратор для основного потока + события для уведомлений*).

**Итог:**
- **Оркестратор = дирижер** (*командует оркестром*).    
- **Хореограф = танцоры** (*знают шаги без подсказок*).

---
