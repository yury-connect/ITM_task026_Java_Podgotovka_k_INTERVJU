# –ü–∞–º—è—Ç—å –≤ Java (HotSpot/JVM) ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ üî•

## 1) –ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ JVM (runtime data areas)

- **Heap (–∫—É—á–∞)** ‚Äî –æ–¥–∏–Ω –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å JVM. –ó–¥–µ—Å—å –∂–∏–≤—É—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –∏ –º–∞—Å—Å–∏–≤—ã. –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è GC.
    
- **Thread Stack (—Å—Ç–µ–∫)** ‚Äî —É **–∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–≤–æ–π**. –•—Ä–∞–Ω–∏—Ç –∫–∞–¥—Ä—ã –≤—ã–∑–æ–≤–æ–≤: –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å—Å—ã–ª–æ—á–Ω—ã–µ/–ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–ø–µ—Ä–∞–Ω–¥–Ω—ã–π —Å—Ç–µ–∫. –ù–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è GC, –Ω–æ –µ–≥–æ —Å—Å—ã–ª–∫–∏ ‚Äî **GC Roots**.
    
- **PC-register (per-thread)** ‚Äî –∞–¥—Ä–µ—Å —Ç–µ–∫—É—â–µ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±–∞–π—Ç–∫–æ–¥–∞.
    
- **Native Method Stack** ‚Äî —Å—Ç–µ–∫–∏ –¥–ª—è JNI/–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞.
    
- **Metaspace** ‚Äî **–Ω–∞—Ç–∏–≤–Ω–∞—è** –ø–∞–º—è—Ç—å –¥–ª—è **–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤** (—Å—Ç—Ä—É–∫—Ç—É—Ä—ã `Klass`, constant pool, –±–∞–π—Ç–∫–æ–¥ –º–µ—Ç–æ–¥–æ–≤, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, –æ–ø–∏—Å–∞—Ç–µ–ª–∏ –ø–æ–ª–µ–π/–º–µ—Ç–æ–¥–æ–≤ –∏ —Ç.–ø.). –ú–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, –ª–∏–º–∏—Ç–∏—Ä—É–µ—Ç—Å—è `-XX:MaxMetaspaceSize`.
    
- **Code Cache** ‚Äî –Ω–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è JIT-—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ (C1/C2), –ø—Ä–æ—Ñ–∏–ª–µ–π (`MethodData`) –∏ inline-cache. –õ–∏–º–∏—Ç–∏—Ä—É–µ—Ç—Å—è `-XX:ReservedCodeCacheSize`.
    
- **Off-heap** ‚Äî –ø—Ä—è–º—ã–µ –±—É—Ñ–µ—Ä—ã (`DirectByteBuffer`), `Unsafe`, FFM/MemorySegment, —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –Ω–∞—Ç–∏–≤–Ω—ã–µ –ª–∏–±—ã. –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é/—Ñ–∏–Ω–∞–ª–∏—Å—Ç–∞–º–∏/—Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞–º–∏, **–≤–Ω–µ** GC-—Ö–∏–ø–∞.    

> üß≠ –ö–ª—é—á–µ–≤–∞—è –º—ã—Å–ª—å: **Heap –æ–¥–∏–Ω**, —Å—Ç–µ–∫–æ–≤ ‚Äî **–ø–æ —á–∏—Å–ª—É –ø–æ—Ç–æ–∫–æ–≤**, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤ ‚Äî –≤ **Metaspace**, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ ‚Äî –≤ **Code Cache**.

---
## 2) **Heap** –ø–æ–¥—Ä–æ–±–Ω–æ: –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ

### 2.1 –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ (*typical layout*)
- **Young Gen**: `Eden` + –¥–≤–∞ `Survivor` (S0/S1).    
- **Old/Tenured**: –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –æ–±—ä–µ–∫—Ç—ã.    
- (–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ `PermGen` ‚Üí –∑–∞–º–µ–Ω—ë–Ω **`Metaspace`** —Å *JDK8*.)    

### 2.2 –ê–ª–ª–æ–∫–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- **Fast path**: _TLAB_ (*Thread Local Allocation Buffer*) –≤ Eden ‚Üí ¬´bump-the-pointer¬ª, –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.    
- **Slow path**: –≤–Ω–µ *TLAB* (*large/fragmented*), —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π.    
- **–≠–≤—Ä–∏–∫–∞**: *Escape Analysis* –º–æ–∂–µ—Ç —Ä–∞–∑–ª–æ–∂–∏—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ–±—ä–µ–∫—Ç –ø–æ –ø–æ–ª—è–º ‚Üí **scalar replacement** (*–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ ¬´–Ω–∞ —Å—Ç–µ–∫–µ¬ª*).    

### 2.3 –ú–æ–ª–æ–¥—ë–∂–Ω—ã–µ/–ø–æ–ª–Ω—ã–µ —Å–±–æ—Ä–∫–∏
- **Minor GC**: –∫–æ–ø–∏—Ä—É–µ—Ç –∂–∏–≤—ã–µ –∏–∑ `Eden` ‚Üí `Survivor`, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç ¬´*–≤–æ–∑—Ä–∞—Å—Ç*¬ª; –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ ‚Äî **promotion** –≤ `Old`.    
- **Major/Full GC**: —Å–±–æ—Ä–∫–∞ —Å—Ç–∞—Ä—à–µ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è + –∫–æ–º–ø–∞–∫—Ü–∏—è (*–∞–ª–≥–æ—Ä–∏—Ç–º –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–ª–µ–∫—Ç–æ—Äa*).    

### 2.4 –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
- **Tenuring threshold**: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è (*–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç—å*).    
- **Fragmentation & compaction**: —Å—Ç–∞—Ä—à–µ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ **—É–ø–ª–æ—Ç–Ω—è–µ—Ç—Å—è**.    
- **Humongous** (**`G1`**): –æ–±—ä–µ–∫—Ç—ã ‚â• 1/2 region ‚Äî –≤—ã–¥–µ–ª—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö (*–≤–∞–∂–Ω–æ –¥–ª—è —Ç—é–Ω–∏–Ω–≥–∞*).    

---
## 3) –§–æ—Ä–º–∞—Ç –æ–±—ä–µ–∫—Ç–∞ –∏ —Å—Å—ã–ª–∫–∏

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: `mark word` (*—Å—Ç–∞—Ç—É—Å, —Ö—ç—à, —Ñ–ª–∞–≥–∏, –±–∏–∞—Å—ã*) + `klass pointer` (*—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–∞*).
    
- **–†–∞–∑–º–µ—Ä**: –æ–±—ã—á–Ω–æ **12‚Äì16 –±–∞–π—Ç** –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç _compressed oops/klass_) + –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –¥–æ 8 –±–∞–π—Ç.
    
- **Compressed Oops**: 64-–±–∏—Ç–Ω–∞—è JVM —Ö—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫–∏ –∫–∞–∫ 32-–±–∏—Ç–Ω—ã–µ —Å –º–∞—Å—à—Ç–∞–±–æ–º ‚Üí —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ `-Xmx` –¥–æ ~32‚Äì57 –ì–ë (—Ä–µ–∂–∏–º –≤–∫–ª—é—á—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).    

---
## 4) **GC**: –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (*–∫–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞*)

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **Roots**: —Å—Ç–µ–∫–∏ –ø–æ—Ç–æ–∫–æ–≤, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è, JNI-—Ö—ç–Ω–¥–ª—ã, system-–æ–±—ä–µ–∫—Ç—ã.
    
- **Write Barriers/Card Table/Remembered Sets**: —É—Å–∫–æ—Ä—è—é—Ç –º–µ–∂–ø–æ–∫–æ–ª–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏.
    
- **STW (stop-the-world)**: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–∑—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –º–∏—Ä (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ —É ZGC/Shenandoah).
    
- **Mark ‚Üí (Copy/Compact)**: –∂–∏–≤—ã–µ –ø–æ–º–µ—á–∞—é—Ç—Å—è, –º—ë—Ä—Ç–≤—ã–µ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è, –≤–æ–∑–º–æ–∂–Ω–∞ –∫–æ–º–ø–∞–∫—Ü–∏—è.    

### –ö–æ–ª–ª–µ–∫—Ç–æ—Ä—ã (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ)
- **Parallel GC** ‚Äî throughput-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –ø–∞—É–∑—ã –¥–ª–∏–Ω–Ω–µ–µ, –Ω–æ –ø—Ä–æ—Å—Ç–æ–π.
    
- **G1 GC (*–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ*)** ‚Äî –¥–µ–ª–∏—Ç `heap` –Ω–∞ **`—Ä–µ–≥–∏–æ–Ω—ã`**, —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã (**mixed collections**), –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –ø–∞—É–∑—ã, **string dedup** (`-XX:+UseStringDeduplication`).
    
- **ZGC** ‚Äî —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π, **concurrent, low-pause** (*–æ–±—ã—á–Ω–æ <10–º—Å*), —Ü–≤–µ—Ç–Ω—ã–µ pointers, –ø–µ—Ä–µ–µ–∑–¥ –æ–±—ä–µ–∫—Ç–æ–≤ ¬´–Ω–∞ –ª–µ—Ç—É¬ª.
    
- **Shenandoah** ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π *low-pause* –∫–æ–ª–ª–µ–∫—Ç–æ—Ä —Å *concurrent compaction*.    

> üéØ –î–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö/–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º: **G1** (*–±–∞–ª–∞–Ω—Å*) –∏–ª–∏ **ZGC** (*–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—É–∑—ã*).

---
## 5) **Metaspace** (*–≤–º–µ—Å—Ç–æ `PermGen`*)

- **–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç**: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–ª–∞—Å—Å–æ–≤ (*vtable, –ø–æ–ª—è/–º–µ—Ç–æ–¥—ã, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, constant pool, –±–∞–π—Ç–∫–æ–¥*), –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã.
    
- **–ö—Ç–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç**: –∞–ª–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏–∑ **–Ω–∞—Ç–∏–≤–Ω–æ–π** –ø–∞–º—è—Ç–∏; —Å–±–æ—Ä/–≤–æ–∑–≤—Ä–∞—Ç —Å–≤—è–∑–∞–Ω—ã —Å **unloading –∫–ª–∞—Å—Å–æ–≤** (*–∫–æ–≥–¥–∞ ClassLoader —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º*).
    
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: `-XX:MetaspaceSize`, `-XX:MaxMetaspaceSize`, `-XX:CompressedClassSpaceSize`.
    
- **–ü—Ä–æ–±–ª–µ–º—ã**: **classloader-leaks** (*–∫–ª–∞—Å—Å—ã –Ω–µ –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è*) ‚Üí —Ä–æ—Å—Ç *Metaspace* ‚Üí `OutOfMemoryError: Metaspace`.    

> ‚ö†Ô∏è **String intern pool** —Ç–µ–ø–µ—Ä—å –≤ **heap**, –Ω–µ –≤ *PermGen*. –¢–∞–±–ª–∏—Ü—ã —Å–∏–º–≤–æ–ª–æ–≤/—Å—Ç—Ä–æ–∫ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –Ω–æ –ø–∞–º—è—Ç—å —Å—Ç—Ä–æ–∫ ‚Äî —Ö–∏–ø.

---
## 6) **–°—Ç–µ–∫ –ø–æ—Ç–æ–∫–∞** (*Thread Stack*)

- **–ö–∞–¥—Ä (*frame*)**: –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–ø–µ—Ä–∞–Ω–¥–Ω—ã–π —Å—Ç–µ–∫, —Å—Å—ã–ª–æ—á–Ω—ã–µ/–ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Å—Å—ã–ª–∫—É –Ω–∞ constant pool.
    
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**: —Ä–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞ (unwind) –¥–æ first catch.
    
- **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ**: –≥–ª—É–±–æ–∫–∞—è —Ä–µ–∫—É—Ä—Å–∏—è ‚Üí `StackOverflowError`.
    
- **–†–∞–∑–º–µ—Ä**: `-Xss` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `-Xss512k`). –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π ‚Üí —Ä–∞–Ω–Ω–∏–µ SOE; —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π ‚Üí –º–µ–Ω—å—à–µ –ø–æ—Ç–æ–∫–æ–≤.
    
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: **–Ω–µ—Ç** –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –≤ —Å—Ç–µ–∫–µ ‚Üí –≥–æ–Ω–∫–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ heap/—Å—Ç–∞—Ç–∏–∫/off-heap.    

---
## 7) **Java Memory Model** (*JMM*) ‚Äî –≤–∏–¥–∏–º–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫

- **happens-before**: –ø—Ä–∞–≤–∏–ª–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.
    
- **volatile**: –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç **–≤–∏–¥–∏–º–æ—Å—Ç—å** –∏ –ø–æ—Ä—è–¥–æ–∫ –¥–ª—è —á–∏—Ç–∞—é—â–∏—Ö/–ø–∏—à—É—â–∏—Ö; –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
    
- **synchronized/locks**: **–≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–µ–Ω–∏–µ + hb-–≥—Ä–∞–Ω–∏—Ü—ã** (–≤—Ö–æ–¥/–≤—ã—Ö–æ–¥ –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∞).
    
- **final**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.
    
- **Atomics/VarHandle**: —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏/–±–∞—Ä—å–µ—Ä–æ–≤.
    
- **False sharing**: –∫—ç—à-–ª–∏–Ω–∏–∏ ‚Üí –∑–∞–ø–æ–ª–Ω—è–π—Ç–µ padding/`@Contended` (JDK internal).    

---
## 8) **–¢–∏–ø—ã —Å—Å—ã–ª–æ–∫** –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

- **Strong** ‚Äî –æ–±—ã—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏.
    
- **Soft** ‚Äî *GC* –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏ (*–∫—ç—à*).
    
- **Weak** ‚Äî —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∂–µ —Å–±–æ—Ä–∫–µ (*–∫–∞—Ä—Ç—ã —Å–ª–∞–±—ã—Ö –∫–ª—é—á–µ–π*).
    
- **Phantom** ‚Äî –¥–ª—è –ø–æ—Å—Ç-mortem –¥–µ–π—Å—Ç–≤–∏–π —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `ReferenceQueue`.
    
- **Finalization** ‚Äî **—É—Å—Ç–∞—Ä–µ–ª–æ**; –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Cleaner`/try-with-resources.    

---
## 9) –ß–∞—Å—Ç—ã–µ **OOME** –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã

- `OutOfMemoryError: Java heap space` ‚Äî —É—Ç–µ—á–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π, –∫—ç—à –±–µ–∑ –ª–∏–º–∏—Ç–∞, —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞—Ñ—ã.
    
- `GC overhead limit exceeded` ‚Äî GC –∑–∞–Ω—è—Ç –ø–æ—á—Ç–∏ –≤—Å—ë –≤—Ä–µ–º—è, –æ—Ç–¥–∞—á–∞ –º–∞–ª–∞.
    
- `OutOfMemoryError: Metaspace` ‚Äî —É—Ç–µ—á–∫–∏ `ClassLoader`, —á–∞—Å—Ç—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–æ–≤.
    
- `OutOfMemoryError: Direct buffer memory` ‚Äî –Ω–µ–æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω—ã–µ `DirectByteBuffer`/off-heap.
    
- `Unable to create new native thread` ‚Äî –ª–∏–º–∏—Ç –ø–æ—Ç–æ–∫–æ–≤/–ø–∞–º—è—Ç–∏ –û–°.
    
- `CodeCache is full` ‚Äî –º–Ω–æ–≥–æ JIT-–∫–æ–¥–∞, –≤–∫–ª—é—á–∏—Ç—å `-XX:ReservedCodeCacheSize`.    

---
## 10) **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –∏ **–ø—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥** (*must-know*)

- **JFR (Java Flight Recorder)** + **Mission Control (JMC)** ‚Äî –Ω–∏–∑–∫–∏–π –æ–≤–µ—Ä—Ö–µ–¥, —Å–æ–±—ã—Ç–∏—è GC/–∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞–Ω–∏—è.    
- `jcmd` (`GC.heap_info`, `GC.run`, `VM.native_memory`, `JFR.start|dump`).    
- `jmap -dump` ‚Äî heap dump (–∞–Ω–∞–ª–∏–∑ –≤ **Eclipse MAT**, VisualVM).    
- `jstat` ‚Äî GC —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.    
- `jstack` ‚Äî –¥–∞–º–ø—ã –ø–æ—Ç–æ–∫–æ–≤ (–ø–æ–∏—Å–∫ —É—Ç–µ—á–µ–∫ —á–µ—Ä–µ–∑ –≤–∏—Å—è—â–∏–µ —Ç—Ä–µ–¥—ã).    
- **JHSDB** (`clhsdb`) ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∞–Ω–∞–ª–∏–∑.    
- –õ–æ–≥–∏ GC: `-Xlog:gc*,safepoint:file=gc.log:time,uptime,level,tags` (JDK9+).    

---
## 11) **–¢—é–Ω–∏–Ω–≥** ‚Äî —á—Ç–æ –∏ –∫–æ–≥–¥–∞ –∫—Ä—É—Ç–∏—Ç—å

### **–ë–∞–∑–æ–≤—ã–µ —Ñ–ª–∞–≥–∏**
- –†–∞–∑–º–µ—Ä—ã heap: `-Xms / -Xmx` (–¥–µ–ª–∞–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏).    
- Metaspace: `-XX:MaxMetaspaceSize=` –ø—Ä–∏ –Ω—É–∂–¥–µ.    
- –°—Ç–µ–∫ –ø–æ—Ç–æ–∫–∞: `-Xss`.    
- –í—ã–±–æ—Ä *GC*:    
    - **G1 (*default*)**: `-XX:+UseG1GC`, —Ü–µ–ª–µ–≤–∞—è –ø–∞—É–∑–∞ `-XX:MaxGCPauseMillis=200` (*–ø–æ–¥ –∑–∞–¥–∞—á—É*).        
    - **ZGC**: `-XX:+UseZGC` –¥–ª—è –Ω–∏–∑–∫–∏—Ö –ø–∞—É–∑.    
- Young/Survivor: `-XX:NewRatio`, `-XX:SurvivorRatio` (*—Ä–µ–∂–µ –Ω—É–∂–Ω–æ —Å G1/ZGC ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç —ç–≤—Ä–∏—Å—Ç–∏–∫–∏*).    
- G1 –¥–µ—Ç–∞–ª–∏: `-XX:G1HeapRegionSize`, `-XX:+UseStringDeduplication`, `-XX:InitiatingHeapOccupancyPercent`.    

### **–ú–µ—Ç–æ–¥–∏–∫–∞** (*–≤–∞–∂–Ω–µ–µ —Ñ–ª–∞–≥–æ–≤*)
1. **–°–Ω–∏–º–∏—Ç–µ —Ñ–∞–∫—Ç—ã**: JFR/GC-–ª–æ–≥–∏/–º–µ—Ç—Ä–∏–∫–∏.    
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ü–µ–ª—å**: Throughput vs Latency.    
3. **–ú–∞–ª–µ–Ω—å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞.    
4. **–ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î/–∞–ª–≥–æ—Ä–∏—Ç–º—ã** —á–∞—Å—Ç–æ –¥–∞—é—Ç –±–æ–ª—å—à–∏–π —ç—Ñ—Ñ–µ–∫—Ç, —á–µ–º ¬´–∫—Ä—É—Ç–∏—Ç—å GC¬ª.    

---
## 12) **–¢–∏–ø–∏—á–Ω—ã–µ ¬´*—É—Ç–µ—á–∫–∏*¬ª**
- **–ö–æ–ª–ª–µ–∫—Ü–∏–∏** (static/singletons/cache –±–µ–∑ TTL/LRU).    
- **Listener/Callback** —Ü–µ–ø–æ—á–∫–∏, –Ω–µ–æ—Ç–ø–∏—Å–∞–Ω–Ω—ã–µ.    
- **ThreadLocal** –±–µ–∑ `remove()` (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø—É–ª–∞—Ö).    
- **ClassLoader leaks** (—Å–µ—Ä–≤–ª–µ—Ç-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –ø–ª–∞–≥–∏–Ω—ã).    
- **Off-heap** (direct buffers, Netty/Zero-copy) ‚Äî GC –∏—Ö –Ω–µ –≤–∏–¥–∏—Ç –Ω–∞–ø—Ä—è–º—É—é, –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ `-XX:MaxDirectMemorySize` –∏ JFR.    

---
## 13) –í–∑–∞–∏–º–æ—Å–≤—è–∑—å **`K8s`**/`–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã` ‚Üî `JVM`

- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ **–ª–∏–º–∏—Ç—ã** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –≤–∫–ª—é—á–∞–π—Ç–µ —á—Ç–µ–Ω–∏–µ cgroup: JDK 10+ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏; –¥–ª—è —Å—Ç–∞—Ä—ã—Ö ‚Äî `-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap`.
    
- **Heap sizing**: –±–µ—Ä–∏—Ç–µ —á–∞—Å—Ç—å –æ—Ç limit (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60‚Äì70%) + –∑–∞–ø–∞—Å –Ω–∞ Metaspace, CodeCache, native, direct.    

---
## 14) **–ö–æ—Ä–æ—Ç–∫–∏–π ¬´—Å–∫–µ–ª–µ—Ç¬ª –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é** <br>(*–º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏*)

> ¬´–í JVM **–æ–¥–∏–Ω Heap**, –≥–¥–µ –∂–∏–≤—É—Ç –æ–±—ä–µ–∫—Ç—ã; **–º–Ω–æ–≥–æ —Å—Ç–µ–∫–æ–≤** ‚Äî –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –ø–æ—Ç–æ–∫; **Metaspace** —Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤, –∞ **Code Cache** ‚Äî JIT-–∫–æ–¥. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ **TLAB** –≤ Eden; –º–æ–ª–æ–¥—ë–∂–Ω—ã–µ —Å–±–æ—Ä–∫–∏ (**Minor GC**) –∫–æ–ø–∏—Ä—É—é—Ç –≤—ã–∂–∏–≤—à–∏—Ö –≤ Survivor –∏ –¥–∞–ª–µ–µ –≤ Old. –ò—Å–ø–æ–ª—å–∑—É–µ–º **G1** (–∏–ª–∏ ZGC) ‚Äî —Ä–µ–≥–∏–æ–Ω—ã, —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –ø–∞—É–∑—ã. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤ –≤ **Metaspace**, –≤—ã–≥—Ä—É–∑–∫–∞ ‚Äî –ø—Ä–∏ —Å–±–æ—Ä–∫–µ ClassLoader. –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ‚Äî **JFR/JMC**, heap-dump —á–µ—Ä–µ–∑ `jmap`, GC-–ª–æ–≥–∏. –¢—é–Ω–∏–Ω–≥ –Ω–∞—á–∏–Ω–∞—é —Å `-Xms/-Xmx`, —Ü–µ–ª–µ–≤—ã—Ö –ø–∞—É–∑ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–∫—Ç–æ–≤, –∞ –Ω–µ –¥–æ–≥–∞–¥–æ–∫.¬ª

---
## 15) –ú–∏–Ω–∏-—á–µ–∫–ª–∏—Å—Ç ‚úÖ

-  –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –ª–æ–≥–∏ –∏ —Å–Ω–∏–º–∞–π JFR –¥–æ —Ç—é–Ω–∏–Ω–≥–∞.    
-  –î–µ—Ä–∂–∏ `-Xms` = `-Xmx` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.    
-  –°–ª–µ–¥–∏ –∑–∞ **Metaspace**/**Code Cache**/off-heap.    
-  –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π `ThreadLocal`.    
-  –î–ª—è latencies < 50‚Äì100–º—Å —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π **ZGC**.    
-  –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö —É—á–∏—Ç—ã–≤–∞–π **cgroup limits**.

---
