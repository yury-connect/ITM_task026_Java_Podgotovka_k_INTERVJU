# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ, —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–±—Ä–∞–ª –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ + –∫–∞–∂–¥—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: **—á—Ç–æ —ç—Ç–æ, –∫–∞–∫—É—é –ø—Ä–æ–±–ª–µ–º—É —Ä–µ—à–∞–µ—Ç, –∫–∞–∫ –º—ã/–º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)**. –ì–æ–≤–æ—Ä—é –ø—Ä—è–º–æ –∏ –ø–æ –¥–µ–ª—É ‚Äî —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ –æ–∑–≤—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ –Ω–∞ —Å–æ–±–µ—Å–µ.

---
## üì° –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è / –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 1. Event-driven (Event-Driven Architecture)
- **–ß—Ç–æ:** –æ–±–º–µ–Ω —Å–æ–±—ã—Ç–∏—è–º–∏ —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä (Kafka).    
- **–†–µ—à–∞–µ—Ç:** decoupling —Å–µ—Ä–≤–∏—Å–æ–≤, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –ø—Ä–∏ –ø–∏–∫–æ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö. 
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** spring-kafka, —Ç–æ–ø–∏–∫–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–∑–∞; producers –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–±—ã—Ç–∏—è, consumers –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∏—Ö; monitor ‚Äî lag –≤ Prometheus/Grafana.    
- **–ü–ª—é—Å:** –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É (consumer groups).    
- **–ú–∏–Ω—É—Å:** —Å–ª–æ–∂–Ω–µ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.    

### 2. Request/Response (REST + Sync)
- **–ß—Ç–æ:** —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP –≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.    
- **–†–µ—à–∞–µ—Ç:** –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Spring REST, timeouts, circuit breaker.    
- **–ó–∞–º–µ—á–∞–Ω–∏–µ:** –¥–ª—è –∑–∞–¥–µ—Ä–∂–µ–∫/–æ—à–∏–±–æ–∫ –Ω—É–∂–µ–Ω fallback/timeout.    

### 3. API Gateway
- **–ß—Ç–æ:** –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, auth, rate limit, –∫—ç—à).    
- **–†–µ—à–∞–µ—Ç:** —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç auth, rate limiting, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏, versioning, BFF.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** Spring Cloud Gateway / NGINX/Envoy; –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–ª JWT, –∫–µ—à–∏—Ä–æ–≤–∞–ª JWKS/introspection, –¥–æ–±–∞–≤–ª—è–ª X-Request-Id.    

---
## üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ / —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

### 4. Database per Service
- **–ß—Ç–æ:** —É –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å–≤–æ—è –ë–î (Postgres —É –Ω–∞—Å –¥–ª—è transactional data).    
- **–†–µ—à–∞–µ—Ç:** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å—Ö–µ–º, –∞–≤—Ç–æ–Ω–æ–º–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è, —É–º–µ–Ω—å—à–µ–Ω–∏–µ ¬´spooky action at a distance¬ª.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Postgres + Hibernate; Liquibase –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π.    

### 5. Transactional Outbox (–∏–∑–±–µ–≥–∞–Ω–∏–µ –¥–≤—É—Ñ–∞–∑–Ω–æ–π commit)
- **–ß—Ç–æ:** –∑–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏—è –≤ ¬´outbox¬ª —Ç–∞–±–ª–∏—Ü—É –≤ —Ç–æ–π –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —á—Ç–æ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ë–î; –∑–∞—Ç–µ–º –æ—Ç–¥–µ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —á–∏—Ç–∞–µ—Ç outbox –∏ –ø—É—à–∏—Ç –≤ Kafka.    
- **–†–µ—à–∞–µ—Ç:** atomicity –º–µ–∂–¥—É DB-update –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π —Å–æ–±—ã—Ç–∏—è.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –≤ –ø—Ä–æ–µ–∫—Ç–µ –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–±–æ job/consumer –¥–ª—è outbox ‚Üí Kafka, –ª–∏–±–æ Kafka Connect CDC. –†–µ–∫–æ–º–µ–Ω–¥—É—é –æ–ø–∏—Å–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—è–ª.    

### 6. SAGA (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- **–ß—Ç–æ:** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–º–∏ —à–∞–≥–∞–º–∏.    
- **–†–µ—à–∞–µ—Ç:** —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –µ–¥–∏–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.    
- **–í–∞—Ä–∏–∞–Ω—Ç—ã:**    
    - **Choreography** (—Å–æ–±—ã—Ç–∏–π–Ω—ã–π –ø–æ–¥—Ö–æ–¥): –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏ –¥–µ–ª–∞–µ—Ç —à–∞–≥/–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—é. ‚úîÔ∏è –ß–∞—Å—Ç–æ —Å Kafka.        
    - **Orchestration** (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä-—Å–µ—Ä–≤–∏—Å): –æ—Ç–¥–µ–ª—å–Ω—ã–π Saga-orchestrator —É–ø—Ä–∞–≤–ª—è–µ—Ç —à–∞–≥–∞–º–∏ (Temporal, custom orchestrator).        
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** –µ—Å–ª–∏ –±—ã–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–æ–ø–ª–∞—Ç–∞ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ choreography —á–µ—Ä–µ–∑ Kafka; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî orchestrator.    
- **–í–∞–∂–Ω–æ:** –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ idempotency.    

### 7. CQRS (Command Query Responsibility Segregation)
- **–ß—Ç–æ:** —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ (–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –º–æ–¥–µ–ª–∏ —á—Ç–µ–Ω–∏—è).    
- **–†–µ—à–∞–µ—Ç:** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ read side, —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ write path.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** write ‚Üí Postgres, read replica –∏–ª–∏ materialized view; event handlers –æ–±–Ω–æ–≤–ª—è—é—Ç read model. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å event-driven.    

---
## ‚ôªÔ∏è –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

### 8. Circuit Breaker
- **–ß—Ç–æ:** —Ä–∞–∑–º—ã–∫–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –æ—à–∏–±–∫–∞—Ö downstream (Resilience4j).    
- **–†–µ—à–∞–µ—Ç:** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∞–≤–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ –¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Resilience4j (retry, circuit, bulkhead).    

### 9. Retry + Exponential Backoff + DLQ
- **–ß—Ç–æ:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏, backoff; –µ—Å–ª–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Äî DLQ.    
- **–†–µ—à–∞–µ—Ç:** transient errors + –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö retry.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** Kafka retry + DLQ; –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (SMS/email) ‚Äî retry —Å backoff, DLQ, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ ELK/Slack.    

### 10. Bulkhead
- **–ß—Ç–æ:** –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø—É–ª—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è), —á—Ç–æ–±—ã –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –Ω–µ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ –≤–µ—Å—å —Å–µ—Ä–≤–∏—Å.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** thread-pools, separate processing queues (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–¥–µ–ª—å–Ω—ã–µ consumer groups –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤).    

### 11. Idempotency / Deduplication
- **–ß—Ç–æ:** –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ at-least-once).    
- **–†–µ—à–∞–µ—Ç:** –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–µ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** idempotency key (jti), —Ö—Ä–∞–Ω–µ–Ω–∏–µ processed ids –≤ Redis/Postgres, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –ø—Ä–æ–¥—é—Å–µ—Ä—ã/consumers.    

---
## üß© –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 12. Dead Letter Queue (DLQ)
- **–ß—Ç–æ:** –º–µ—Å—Ç–æ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ retries.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** Kafka DLQ + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥; manual/automated reprocessing.

### 13. Backpressure / Rate Limiting
- **–ß—Ç–æ:** –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** at Gateway (rate limit), –≤ consumers ‚Äî throttling, HPA –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.    

### 14. Anti-Corruption Layer (ACL)
- **–ß—Ç–æ:** —Ñ–∞—Å–∞–¥/–∞–¥–∞–ø—Ç–µ—Ä –º–µ–∂–¥—É —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ –Ω–æ–≤—ã–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–º, –ø–µ—Ä–µ–≤–æ–¥ —Ñ–æ—Ä–º–∞—Ç–æ–≤.    
- **–†–µ—à–∞–µ—Ç:** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å legacy –±–µ–∑ ¬´–ø—Ä–æ—Ç–µ–∫–∞–Ω–∏—è¬ª —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ –≤ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω.

---
## üîÅ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ delivery

### 15. Canary / Blue-Green / Rolling Update
- **–ß—Ç–æ:** —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–∫–∞—Ç—ã–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** Helm + Kubernetes; rolling updates –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ ‚Äî canary/blue-green —á–µ—Ä–µ–∑ ingress/route.    

### 16. Immutable Infrastructure / Immutable Images
- **–ß—Ç–æ:** —Å–æ–±—Ä–∞–Ω–Ω—ã–π docker-–æ–±—Ä–∞–∑ –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Ä–µ–ª–∏–∑–∞.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Docker images –≤ Nexus/Harbor, —Ç–µ–≥ ‚Äî commit hash.    

### 17. Sidecar Pattern
- **–ß—Ç–æ:** –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä—è–¥–æ–º —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è/–ø—Ä–æ–∫—Å–∏).    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** —Å–µ—Ä–≤–∏—Å-mesh sidecar (Envoy) –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π log-shipper.    

---
## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 18. OAuth2 / JWT / Client_credentials + Keycloak
- **–ß—Ç–æ:** —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** Keycloak –≤—ã–¥–∞—ë—Ç JWT, Gateway/Resource server –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç JWKS, S2S ‚Äî client_credentials.    

### 19. mTLS
- **–ß—Ç–æ:** –≤–∑–∞–∏–º–Ω–∞—è TLS –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –¥–æ–≤–µ—Ä–∏—è.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∫–∞–Ω–∞–ª–∞—Ö/–º–µ–∂–¥—É gateway –∏ backend.    

---
## üì£ Observability / Monitoring / Debugging

### 20. Correlation ID / Distributed Tracing
- **–ß—Ç–æ:** –ø—Ä–æ–∫–∏–¥—ã–≤–∞–Ω–∏–µ id —á–µ—Ä–µ–∑ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã, —Ç—Ä–µ–π—Å–∏–Ω–≥ (Jaeger).    
- **–†–µ—à–∞–µ—Ç:** —Å–≤—è–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞—à –ø—Ä–æ–µ–∫—Ç):** X-Request-Id –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö, traces -> Jaeger, –ª–æ–≥–∏ –≤ ELK.

### 21. Centralized Logging / ELK
- **–ß—Ç–æ:** –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤, –ø–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤.    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** structured JSON logs -> Logstash/Fluentd -> Elasticsearch -> Kibana.    

### 22. Metrics / Health Checks / Actuator
- **–ß—Ç–æ:** readiness/liveness, –º–µ—Ç—Ä–∏–∫–∏ (Prometheus).    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Spring Actuator endpoints, probes –≤ k8s, –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus, dashboards –≤ Grafana.    

---
## üß≠ Patterns for data flow & consistency (summary)
- **Event Sourcing** ‚Äî —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∫ –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π (–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π, —Ä–µ–¥–∫–æ –Ω–∞ –ø—Ä–æ—Å—Ç—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö).    
- **Materialized Views** ‚Äî read models –¥–ª—è CQRS.    
- **Saga (Compensating Transactions)** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.    

---
## ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã ¬´–∫–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ¬ª (2‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)

¬´–í –ø—Ä–æ–µ–∫—Ç–µ –º—ã —Å—Ç—Ä–æ–∏–ª–∏ event-driven —Å–∏—Å—Ç–µ–º—É –Ω–∞ Kafka: —Å–æ–±—ã—Ç–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –≥—Ä—É–∑–∞ –ø—É–±–ª–∏–∫–æ–≤–∞–ª–∏—Å—å –ø—Ä–æ–¥—é—Å–µ—Ä–∞–º–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å consumers; –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ë–î –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ Transactional Outbox. –î–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏–º–µ–Ω—è–ª–∏ Saga (choreography —á–µ—Ä–µ–∑ Kafka), idempotency –∏ DLQ; —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –¥–æ–±–∏–≤–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ retry/backoff, circuit-breaker –∏ HPA –≤ Kubernetes.¬ª

---
## ‚úçÔ∏è –ö–æ—Ä–æ—Ç–∫–∏–µ ¬´—Ä–µ–∫–≤–∏–∑–∏—Ç—ã¬ª, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å –≤ –æ—Ç–≤–µ—Ç–∞—Ö

- Kafka (–ø–∞—Ä—Ç–∏—Ü–∏–∏, consumer groups, DLQ, lag monitoring).    
- Transactional Outbox (atomic DB + event publish).    
- Saga (choreography vs orchestrator).    
- API Gateway (auth, rate limit, cache JWKS).    
- Kubernetes deploy patterns (rolling/canary) + Helm.    
- Observability: correlation id, ELK, Prometheus/Grafana.
---
---
---
# 1) –û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π **cheat-sheet** (*–∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã + —á—Ç–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ*)

---
### üîπ Event-driven (Kafka)

–ß—Ç–æ: –æ–±–º–µ–Ω —Å–æ–±—ã—Ç–∏–π–∞–º–∏ —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä.  
–†–µ—à–∞–µ—Ç: decoupling, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–∏–∫–∞—Ö.  
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Kafka, Spring-Kafka, Schema Registry.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´–ü—É–±–ª–∏–∫—É–µ–º —Å–æ–±—ã—Ç–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ Kafka; consumers –≤ consumer-group –ø–∞—Ä–∞–ª–ª–µ–ª—è—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É; lag –º–æ–Ω–∏—Ç–æ—Ä–∏–º –≤ Prometheus/Grafana.¬ª

---
### üîπ Transactional Outbox

–ß—Ç–æ: –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ outbox –≤ —Ç–æ–π –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ø–æ—Ç–æ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —á–∏—Ç–∞–µ—Ç outbox ‚Üí Kafka.  
–†–µ—à–∞–µ—Ç: –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å DB-update + event publish (no dual commit).  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´Outbox –¥–∞—ë—Ç –≥–∞—Ä–∞–Ω—Ç–∏—é, —á—Ç–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–±—ã—Ç–∏–µ –≤—ã–ø—É—â–µ–Ω—ã –∞—Ç–æ–º–∞—Ä–Ω–æ.¬ª

---
### üîπ SAGA (Choreography / Orchestration)

–ß—Ç–æ: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π + –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏.  
–†–µ—à–∞–µ—Ç: —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –±–µ–∑ –¥–≤—É—Ö—Ñ–∞–∑–Ω–æ–π commit.  
–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏: Choreography (—á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è Kafka) –∏–ª–∏ Orchestrator (Temporal, custom saga-service).  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ choreography —á–µ—Ä–µ–∑ Kafka; –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö ‚Äî orchestration (Temporal) —Å —è–≤–Ω—ã–º–∏ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–º–∏ —à–∞–≥–∞–º–∏.¬ª

---
### üîπ CQRS + Materialized Views

–ß—Ç–æ: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ command (write) –∏ query (read). Read-–º–æ–¥–µ–ª—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.  
–†–µ—à–∞–µ—Ç: –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ, —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´Write –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã, events –æ–±–Ω–æ–≤–ª—è—é—Ç materialized read-models –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.¬ª

---
### üîπ API Gateway

–ß—Ç–æ: –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (routing, auth, rate-limit, cache, transform).  
–†–µ—à–∞–µ—Ç: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, A/B, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ JWKS/introspection.  
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Spring Cloud Gateway, Envoy, Kong, NGINX.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´Gateway –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç JWT, –∫—ç—à–∏—Ä—É–µ—Ç JWKS/introspection, –¥–µ–ª–∞–µ—Ç rate-limiting –∏ routing –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã.¬ª

---
### üîπ Circuit Breaker / Retry / Backoff / DLQ

–ß—Ç–æ: —Ä–µ–∑–∏–ª–∏–µ–Ω—Ç-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –æ—à–∏–±–æ–∫.  
–†–µ—à–∞–µ—Ç: –∑–∞—â–∏—â–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –æ—Ç –ª–∞–≤–∏–Ω–Ω—ã—Ö –ø–∞–¥–µ–Ω–∏–π; DLQ ‚Äî –º–µ—Å—Ç–æ –¥–ª—è –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.  
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Resilience4j, Kafka DLQ.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´Retry + exponential backoff + DLQ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π, circuit-breaker –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑ downstream.¬ª

---
### üîπ Idempotency / Deduplication

–ß—Ç–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö delivery.  
–†–µ—à–∞–µ—Ç: –∏–∑–±–µ–∂–∞–Ω–∏–µ –¥—É–±–ª–µ–π (at-least-once).  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´–ò—Å–ø–æ–ª—å–∑—É–µ–º idempotency key (jti/orderId) + storage (Redis/Postgres) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.¬ª

---
### üîπ Database per Service

–ß—Ç–æ: –∫–∞–∂–¥–∞—è bounded context-—Å–ª—É–∂–±–∞ ‚Äî —Å–≤–æ—è –ë–î.  
–†–µ—à–∞–µ—Ç: –∞–≤—Ç–æ–Ω–æ–º–∏—è —Å—Ö–µ–º, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–µ–ª–∏–∑, —É–º–µ–Ω—å—à–µ–Ω–∏–µ coupling.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ë–î; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è/–∞–ø–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å cross-service joins.¬ª

---
### üîπ Sidecar / Service Mesh (Envoy/Istio)

–ß—Ç–æ: –¥–æ–ø. –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä—è–¥–æ–º —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (—Ç—Ä–∞—Å—Å–∏–Ω–≥, mTLS, retries).  
–†–µ—à–∞–µ—Ç: offload —Å–µ—Ç–µ–≤—ã—Ö/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´–î–ª—è east-west —Ç—Ä–∞—Ñ–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ sidecar/mesh –¥–ª—è mTLS –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞.¬ª

---
### üîπ Canary / Blue-Green / Rolling Deploy

–ß—Ç–æ: —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.  
–†–µ—à–∞–µ—Ç: –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏ –ø—Ä–∏ —Ä–µ–ª–∏–∑–∞—Ö.  
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Helm, Kubernetes, Ingress (traffic split).  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´–†–æ–ª–ª–∏–Ω–≥-–∞–ø–¥–µ–π—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é; –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∏—á ‚Äî canary —á–µ—Ä–µ–∑ ingress/feature flag.¬ª

---
### üîπ Immutable Images / CI-CD pipeline

–ß—Ç–æ: –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–∞–∫ –≤–µ—Ä—Å–∏—è —Ä–µ–ª–∏–∑–∞.  
–†–µ—à–∞–µ—Ç: –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –¥–µ–ø–ª–æ—è.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´Docker image —Å tag=commit; Jenkins ‚Üí Helm ‚Üí K8s; rollback —á–µ—Ä–µ–∑ helm rollback.¬ª

---
### üîπ Observability (Correlation ID, Tracing, Metrics, Logs)

–ß—Ç–æ: —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞/–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è/–º–µ—Ç—Ä–∏–∫–∏/—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏.  
–†–µ—à–∞–µ—Ç: –±—ã—Å—Ç—Ä—ã–π root cause analysis.  
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Jaeger/Zipkin, Prometheus/Grafana, ELK.  
–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å: ¬´X-Request-Id + Jaeger –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç—Ä–∞—Å—Å; –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus, –ª–æ–≥–∏ –≤ ELK.¬ª

---

# 2) –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (ASCII) ‚Äî 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞ (Event flow, Saga flow, Deploy flow)

---
## A) Event flow + Outbox ‚Üí Kafka ‚Üí Consumers
```pgsql
[Service A DB]             [Outbox Table]
   |  (1) local TX: update + insert outbox  |
   |----------------------------------------|
   |                                        |
   v                                        v
[Outbox Reader Job] --(2)--> [Kafka Topic (partitioned)]
                                  |
                                  v
               +------------------+------------------+
               |                  |                  |
        [Consumer 1]         [Consumer 2]        [Consumer N]
          (process)            (process)            (process)
               |                  |                  |
           success / fail      success / fail    -> on repeated fail -> DLQ
```

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ**:
1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ë–î –∏ –∑–∞–ø–∏—Å—å –≤ outbox –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.    
2. Outbox reader –ø—É—à–∏—Ç –≤ Kafka.    
3. Consumers –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç, –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî retry ‚Üí DLQ.    

---
## B) Saga ‚Äî choreography vs orchestration

**Choreography (*—á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è*)**
```rust
[Order Service] --event--> [Payment Service] --event--> [Inventory Service]
     |(OrderCreated)             |(PaymentSucceeded)        |(InventoryReserved)
     v                          v                         v
 each service —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ.
–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ -> —Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø—É–±–ª–∏–∫—É–µ—Ç CompensationEvent -> –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—Ç.
```

**Orchestration (*Temporal / Saga Orchestrator*)**
```rust
[Orchestrator]
   |
   |--(cmd)--> [Order Service]  (local TX)
   |--(cmd)--> [Payment Service]
   |--(cmd)--> [Inventory Service]
   |
   -> –µ—Å–ª–∏ –æ–¥–∏–Ω —à–∞–≥ —É–ø–∞–ª -> orchestrator –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã.
```

---
## C) Deploy / CI-CD / Runtime flow
```rust
Developer
   |
 push PR -> merge to test
   |
 Jenkins (CI)
  - mvn build, tests
  - docker build -> registry (tag=gitSha)
  - helm upgrade --install --set image.tag=gitSha -> Kubernetes (test ns)
   |
 Kubernetes:
  - Deployment -> ReplicaSet -> Pods
  - readiness/liveness probes
  - Service -> Ingress -> API Gateway
   |
Clients/QA -> API Gateway -> Service(s)
Observability overlay: Prometheus, Grafana, Jaeger, ELK
```

---
# 3) FAQ-—Ñ—Ä–∞–∑—ã –∏ –≥–æ—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã (—á—Ç–æ–±—ã —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ)

- ¬´–î–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É DB –∏ —Å–æ–±—ã—Ç–∏—è–º–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Transactional Outbox: –∑–∞–ø–∏—Å—å –≤ outbox –≤ —Ç–æ–π –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ + –æ—Ç–¥–µ–ª—å–Ω—ã–π reader, –∫–æ—Ç–æ—Ä—ã–π –ø—É—à–∏—Ç –≤ Kafka.¬ª
    
- ¬´–î–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª–∏–Ω–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ choreography (Kafka) ‚Äî –ø—Ä–æ—â–µ –∏ –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è; –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –ø—Ä–∏–º–µ–Ω—è–ª–∏ orchestrator (Temporal).¬ª
    
- ¬´API-Gateway —Ä–µ—à–∞–µ—Ç auth/rate-limit/routing –∏ –∫—ç—à–∏—Ä—É–µ—Ç JWKS/introspection; —Ç—è–∂–µ–ª–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö.¬ª
    
- ¬´–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî –∫–ª—é—á: idempotency key + —Ö—Ä–∞–Ω–µ–Ω–∏–µ processed ids (Redis/Postgres) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–µ–π.¬ª
    
- ¬´–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: retry + exponential backoff + DLQ + circuit breaker (Resilience4j).¬ª    

---
# 4) –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫-–ª–∏—Å—Ç (*–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç –ø–µ—Ä–µ–¥ —Å–æ–±–µ—Å–æ–º*)

- –ù–∞–∑–≤–∞—Ç—å 6‚Äì8 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (Event-driven, Outbox, SAGA, API Gateway, Circuit Breaker, Idempotency, DB per service, Observability).
    
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ ‚Äî 1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: —á—Ç–æ —Ä–µ—à–∞–µ—Ç + –ø—Ä–∏–º–µ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.
    
- –ü—Ä–∏–≤–µ—Å—Ç–∏ 1-2 —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: Kafka + DLQ + Prometheus; Liquibase –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π; Helm + Jenkins + Helm rollback).
    
- –ó–∞–∫—Ä–µ–ø–∏—Ç—å —Ñ—Ä–∞–∑–æ–π: ¬´–ú—ã –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–ª–∏ –º–µ–∂–¥—É —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å—é: event-driven + compensations + idempotency.¬ª
---
