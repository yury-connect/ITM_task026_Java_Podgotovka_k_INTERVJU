# –í–∏–¥—ã —Å—Å—ã–ª–æ–∫ –≤ Java

1. **Strong Reference**¬†_(–°–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞)_

- **–û–±—ã—á–Ω—ã–µ**¬†—Å—Å—ã–ª–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ–∑–¥–∞–µ–º –≤ –∫–æ–¥–µ.
- –û–±—ä–µ–∫—Ç—ã —Å —Ç–∞–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏¬†**–Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è**¬†**GC**, –ø–æ–∫–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–∏—Ö¬†**—Å—É—â–µ—Å—Ç–≤—É–µ—Ç**.

```java
    StringBuilder builder = new StringBuilder(); // builder - —ç—Ç–æ strong-—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç StringBuilder
```

2. **Soft Reference**¬†_(–ú—è–≥–∫–∞—è —Å—Å—ã–ª–∫–∞)_

- **GC**¬†–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–¥–∞–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ¬†**—Ç–æ–ª—å–∫–æ**¬†—á–µ—Ä–µ–∑¬†**soft**-—Å—Å—ã–ª–∫–∏ ** —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏** (_–ø–µ—Ä–µ–¥ –≤—ã–±—Ä–æ—Å–æ–º¬†`OutOfMemoryError`_).
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.  
    ~~–¢–æ –∂–µ —Å–∞–º–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è¬†**WeakReference**.~~

```java
    StringBuilder builder = new StringBuilder();
    SoftReference<StringBuilder> softBuilder = new SoftReference(builder);
    softBuilder.get();  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç strong-—Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ –æ–Ω –Ω–µ —É–¥–∞–ª–µ–Ω GC (–∏–Ω–∞—á–µ -null)
    softBuilder.clear(); // –Ø–≤–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
```

3. **Weak Reference**¬†_(–°–ª–∞–±–∞—è —Å—Å—ã–ª–∫–∞)_

- –û–±—ä–µ–∫—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ¬†**—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑¬†~~_—Ü–µ–ø–æ—á–∫—É_~~¬†weak-—Å—Å—ã–ª–∫–∏**, —É–¥–∞–ª—è—é—Ç—Å—è¬†**–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∂–µ –∑–∞–ø—É—Å–∫–µ GC**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤¬†`WeakHashMap`¬†–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–π.

```java
    WeakReference<StringBuilder> weakBuilder = new WeakReference<>(new StringBuilder("Hello"));
    weakBuilder.get();  // –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å null, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª–µ–Ω GC
```

4. **Phantom Reference**¬†_(–§–∞–Ω—Ç–æ–º–Ω–∞—è —Å—Å—ã–ª–∫–∞)_

- **–ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç**¬†–ø–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç (_–º–µ—Ç–æ–¥¬†`get()`¬†**–≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`null`**_).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ (_–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏_);
- –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç¬†`WeakReference`,¬†**–Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É**¬†–ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ –≤—Å–µ—Ö¬†**—Å–∏–ª—å–Ω—ã—Ö**¬†—Å—Å—ã–ª–æ–∫;
- –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑¬†`ReferenceQueue`;
- –ü–æ–ª–µ–∑–Ω–∞ –¥–ª—è —á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (_–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å¬†`DirectByteBuffer`_);  
    üí°¬†**–§–∞–Ω—Ç–æ–º–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã**, –Ω–æ –¥–∞—é—Ç –±–æ–ª—å—à–µ¬†**–∫–æ–Ω—Ç—Ä–æ–ª—è**¬†–Ω–∞–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤.

```java
    ReferenceQueue<StringBuilder> queue = new ReferenceQueue<>();
    PhantomReference<StringBuilder> phantomBuilder = new PhantomReference<>(new StringBuilder("Hello"), queue);
    phantomBuilder.get();  // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null
```

**ReferenceQueue**¬†(_–û—á–µ—Ä–µ–¥—å —Å—Å—ã–ª–æ–∫_) - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–æ–ø–∞–¥–∞—é—Ç —Å—Å—ã–ª–∫–∏ (`WeakReference`,¬†`SoftReference`,¬†`PhantomReference`)¬†**–ø–æ—Å–ª–µ**¬†—É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ (**GC**).

- –ü–æ–∑–≤–æ–ª—è–µ—Ç¬†**–æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å**¬†–º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞¬†**GC**¬†–ø—Ä–∏–∑–Ω–∞–ª –æ–±—ä–µ–∫—Ç¬†**–Ω–µ–Ω—É–∂–Ω—ã–º**.
- **Reference-–æ–±—ä–µ–∫—Ç**¬†(_–Ω–µ —Å–∞–º —É–¥–∞–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç_) –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å¬†**–ø–æ—Å–ª–µ**¬†–æ—á–∏—Å—Ç–∫–∏ –ø–∞–º—è—Ç–∏.
- –ü—Ä–∏¬†**—Å–æ–∑–¥–∞–Ω–∏–∏**¬†—Å—Å—ã–ª–∫–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å¬†`ReferenceQueue`, –∫—É–¥–∞ –æ–Ω–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞.
- **PhantomReference**¬†–≤—Å–µ–≥–¥–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤¬†`ReferenceQueue`, –Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞¬†`finalize()`¬†–æ–±—ä–µ–∫—Ç–∞.  
    üí° –í –æ—á–µ—Ä–µ–¥—å –ø–æ–ø–∞–¥–∞—é—Ç¬†**–∏–º–µ–Ω–Ω–æ —Å—Å—ã–ª–∫–∏**, –∞¬†**–Ω–µ —Å–∞–º–∏ –æ–±—ä–µ–∫—Ç—ã**.

```
***** –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏ *****
1) StrongReference ‚Äî —ç—Ç–æ —Å–∞–º—ã–µ –æ–±—ã—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ 
    –º—ã —Å–æ–∑–¥–∞–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –ª—é–±–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Å—ã–ª–æ—á–Ω–æ–≥–æ —Ç–∏–ø–∞.
        StringBuilder builder = new StringBuilder();
            - builder —ç—Ç–æ –∏ –µ—Å—Ç—å strong-—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç StringBuilder.
        
2) SoftReference ‚Äî  GC –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —É–¥–∞–ª–∏—Ç —Å –∫—É—á–∏ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã, 
    –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–ª—å–∫–æ –ø–æ soft-—Å—Å—ã–ª–∫–µ, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –±—Ä–æ—Å–∏—Ç OutOfMemoryError. 
    SoftReference —ç—Ç–æ –Ω–∞—à –º–µ—Ö–∞–Ω–∏–∑–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏, –Ω–æ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π 
    —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å, GC —É–¥–∞–ª–∏—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ—Å—è 
    –æ–±—ä–µ–∫—Ç—ã –∏–∑ –ø–∞–º—è—Ç–∏ –∏ —Ç–µ–º —Å–∞–º—ã–º –ø–æ–ø—Ä–æ–±—É–µ—Ç —Å–ø–∞—Å—Ç–∏ JVM –æ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.
        StringBuilder builder = new StringBuilder();
        SoftReference<StringBuilder> softBuilder = new SoftReference(builder);
        softBuilder.get() ‚Äî –≤–µ—Ä–Ω–µ—Ç strong-—Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç StringBuilder 
            –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ GC –Ω–µ —É–¥–∞–ª–∏–ª —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –∏–∑ –ø–∞–º—è—Ç–∏. 
            –í –¥—Ä—É–≥–æ–º —Å–ª—É—á–∞–µ –≤–µ—Ä–Ω–µ—Ç—Å—è null.
        softBuilder.clear() ‚Äî —É–¥–∞–ª–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç StringBuilder
–¢–æ –∂–µ —Å–∞–º–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è WeakReference."

3) WeakReference ‚Äî –µ—Å–ª–∏ GC –≤–∏–¥–∏—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É 
    weak-—Å—Å—ã–ª–æ–∫ (–∏—Å—á–µ–∑–Ω—É–ª–∏ strong-—Å—Å—ã–ª–∫–∏), —Ç–æ –æ–Ω —É–¥–∞–ª–∏—Ç –µ–≥–æ –∏–∑ –ø–∞–º—è—Ç–∏.

4) PhantomReference ‚Äî –µ—Å–ª–∏ GC –≤–∏–¥–∏—Ç —á—Ç–æ –æ–±—ä–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É 
    phantom-—Å—Å—ã–ª–æ–∫, —Ç–æ –æ–Ω –µ–≥–æ —É–¥–∞–ª–∏—Ç –∏–∑ –ø–∞–º—è—Ç–∏. –ü–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤ GC.
    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —É —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ —Å—Å—ã–ª–æ–∫ –¥–≤–µ.
    * –ü–µ—Ä–≤–∞—è —ç—Ç–æ —Ç–æ, —á—Ç–æ –º–µ—Ç–æ–¥ get() –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null. 
        –ò–º–µ–Ω–Ω–æ –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ PhantomReference –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
        —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–µ —Å ReferenceQueue.
    * –í—Ç–æ—Ä–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å ‚Äì –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç SoftReference –∏ WeakReference, 
        GC –¥–æ–±–∞–≤–∏—Ç phantom-—Å—Å—ã–ª–∫—É –≤ ReferenceQueue –ø–æ—Å–ª–µ —Ç–æ–≥–æ 
        –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –º–µ—Ç–æ–¥ finalize().

So in brief: Soft references try to keep the reference. Weak references don‚Äôt try to keep the reference. 
Phantom references don‚Äôt free the reference until cleared.

ReferenceQueue. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ GC –æ–ø—Ä–µ–¥–µ–ª–∏—Ç 
—á—Ç–æ –æ–±—ä–µ–∫—Ç –±–æ–ª–µ–µ –Ω–µ –Ω—É–∂–µ–Ω –∏ –µ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å. 

–ò–º–µ–Ω–Ω–æ —Å—é–¥–∞ –ø–æ–ø–∞–¥–∞–µ—Ç Reference –æ–±—ä–µ–∫—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω —Å—Å—ã–ª–∞–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω –∏–∑ –ø–∞–º—è—Ç–∏. 
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Reference –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ReferenceQueue, 
–≤ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø–æ–º–µ—â–∞—Ç—å—Å—è —Å—Å—ã–ª–∫–∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è.
```

---
