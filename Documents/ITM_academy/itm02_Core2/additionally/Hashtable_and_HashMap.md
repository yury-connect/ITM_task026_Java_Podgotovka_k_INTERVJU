# Основные различия между `Hashtable` и `HashMap` в Java

|Критерий|`Hashtable` (с Java 1.0)|`HashMap` (с Java 1.2)|
|---|---|---|
|**Синхронизация**|**Потокобезопасна** (все методы `synchronized`)|**Не потокобезопасна** (нужна внешняя синхронизация или `ConcurrentHashMap`)|
|**Null-ключи/значения**|**Не поддерживает** (`NullPointerException`)|**Поддерживает** (1 `null`-ключ и любое количество `null`-значений)|
|**Производительность**|**Медленнее** из-за блокировок|**Быстрее** (нет накладных расходов на синхронизацию)|
|**Наследование**|Устаревший класс (лучше не использовать)|Современная замена (`Map` интерфейс)|
|**Итераторы**|Использует `Enumeration` (устаревший)|Использует `Iterator` (и `fail-fast` поведение)|
|**Порядок элементов**|Не гарантирует порядок (как `HashMap`)|С Java 8 при коллизиях может хранить в **дереве** (если корзина большая)|

### **Когда что использовать?**

- **`HashMap`** – **стандартный выбор** (если не нужна потокобезопасность).
    
- **`ConcurrentHashMap`** – если нужна **высокая производительность** в многопоточной среде (лучше `Hashtable`).
    
- **`Hashtable`** – **устарел**, но иногда встречается в legacy-коде.
    

### **Примеры**

#### 1. `HashMap` (разрешены `null`-значения)
```java
HashMap<String, Integer> map = new HashMap<>();
map.put("key1", 10);
map.put(null, 20);          // OK
map.put("key2", null);      // OK
```

#### 2. `Hashtable` (не поддерживает `null`)
```java
Hashtable<String, Integer> table = new Hashtable<>();
table.put("key1", 10);
table.put(null, 20);        // NullPointerException
table.put("key2", null);    // NullPointerException
```

### **Вывод**
- **`HashMap`** – быстрее, гибче (поддерживает `null`), но не потокобезопасен.    
- **`Hashtable`** – медленнее, устарел, но синхронизирован.    
- **Лучшая альтернатива для многопоточности – `ConcurrentHashMap`.**

---
