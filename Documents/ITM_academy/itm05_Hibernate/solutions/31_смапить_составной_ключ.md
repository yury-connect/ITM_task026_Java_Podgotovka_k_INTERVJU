# –ö–∞–∫ —Å–º–∞–ø–∏—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á?

---
## üîê –°–æ—Å—Ç–∞–≤–Ω–æ–π (*–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π*) –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –≤ JPA
**–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á**¬†(_composite primary key_) ‚Äî —ç—Ç–æ¬†**–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫**, –∫–æ—Ç–æ—Ä—ã–µ –≤–º–µ—Å—Ç–µ –æ–±—Ä–∞–∑—É—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ.

### üß≠ –°–ø–æ—Å–æ–±—ã –º–∞–ø–ø–∏–Ω–≥–∞ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∫–ª—é—á–∞
–í JPA –µ—Å—Ç—å¬†**–¥–≤–∞ —Å–ø–æ—Å–æ–±–∞**¬†–∑–∞–¥–∞–Ω–∏—è —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∫–ª—é—á–∞:

|**–°–ø–æ—Å–æ–±**|**–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è**|**–ö–ª–∞—Å—Å –∫–ª—é—á–∞**|**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**|
|---|---|---|---|
|üîπ¬†`@IdClass`|`@IdClass(ClassName.class)`|–û–±—ã—á–Ω—ã–π¬†**POJO**|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—è –∫–ª—é—á–∞¬†**–æ–±—ä—è–≤–ª–µ–Ω—ã –ø—Ä—è–º–æ –≤ —Å—É—â–Ω–æ—Å—Ç–∏**.|
|üîπ¬†`@EmbeddedId`|`@EmbeddedId`|`@Embeddable`|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–ª—é—á –æ—Ñ–æ—Ä–º–ª–µ–Ω –∫–∞–∫¬†**–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç**.|

### üß© 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ¬†`@IdClass`
#### üìå –®–∞–≥–∏:
1. –°–æ–∑–¥–∞—ë–º –∫–ª–∞—Å—Å –∫–ª—é—á–∞ —Å –Ω—É–∂–Ω—ã–º–∏ –ø–æ–ª—è–º–∏,¬†`equals()`¬†–∏¬†`hashCode()`.
2. –ê–Ω–Ω–æ—Ç–∏—Ä—É–µ–º —Å—É—â–Ω–æ—Å—Ç—å¬†`@IdClass(–ò–º—è–ö–ª–∞—Å—Å–∞.class)`.
3. –ü–æ–º–µ—á–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤ —Å—É—â–Ω–æ—Å—Ç–∏¬†`@Id`.
#### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ò–º–µ–Ω–∞ –∏ —Ç–∏–ø—ã –ø–æ–ª–µ–π –≤ –∫–ª–∞—Å—Å–µ –∫–ª—é—á–∞ –¥–æ–ª–∂–Ω—ã¬†**—Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–æ–ª—è–º–∏ –≤ —Å—É—â–Ω–æ—Å—Ç–∏**.
- –ö–ª–∞—Å—Å –∫–ª—é—á–∞ –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å¬†`Serializable`.

```java
// –ö–ª–∞—Å—Å –∫–ª—é—á–∞
public class AccountId implements Serializable {
  private String accountNumber;
  private String accountType;

  // equals() –∏ hashCode() –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
}

// –°—É—â–Ω–æ—Å—Ç—å
@Entity
@IdClass(AccountId.class)
public class Account {
  @Id
  private String accountNumber;

  @Id
  private String accountType;

  private BigDecimal balance;
}
```

---

```
***** –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏ *****
–°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á, —Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π —Å–æ—Å—Ç–∞–≤–Ω—ã–º –∫–ª—é—á–æ–º, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∏–∑ –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ —Ç–∞–±–ª–∏—Ü—ã.

 @IdClass
–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ —Å –∏–º–µ–Ω–µ–º Account, –∏ –æ–Ω–∞ –∏–º–µ–µ—Ç –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞ - accountNumber –∏ accountType, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á. –ß—Ç–æ–±—ã –æ–±–æ–∑–Ω–∞—á–∏—Ç—å –æ–±–∞ —ç—Ç–∏—Ö –ø–æ–ª—è –∫–∞–∫ —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∫–ª—é—á–∞ –º—ã –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä, ComplexKey —Å —ç—Ç–∏–º–∏ –ø–æ–ª—è–º–∏.
–ó–∞—Ç–µ–º –Ω–∞–º –Ω—É–∂–Ω–æ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–Ω–æ—Å—Ç—å Account –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π @IdClass(ComplexKey.class). –ú—ã —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã –æ–±—ä—è–≤–∏—Ç—å –ø–æ–ª—è –∏–∑ –∫–ª–∞—Å—Å–∞ ComplexKey –≤ —Å—É—â–Ω–æ—Å—Ç–∏ Account —Å —Ç–∞–∫–∏–º–∏ –∂–µ –∏–º–µ–Ω–∞–º–∏ –∏ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å –ø–æ–º–æ—â—å—é @Id.

 @EmbeddedId
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —è–∑—ã–∫–æ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–ª–µ–π –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∫–ª–∞—Å—Å –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞, BookId, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω @Embeddable.
–ó–∞—Ç–µ–º –Ω–∞–º –Ω—É–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –≤ —Å—É—â–Ω–æ—Å—Ç—å Book, –∏—Å–ø–æ–ª—å–∑—É—è @EmbeddedId.
```

---
