# –ö–∞–∫–∏–µ **—á–µ—Ç—ã—Ä–µ —Å—Ç–∞—Ç—É—Å–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞** `Entity` –æ–±—ä–µ–∫—Ç–∞ (*Entity Instance‚Äôs Life Cycle*) –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å?

---
## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª `Entity` –≤ *JPA*

| **–°–æ—Å—Ç–æ—è–Ω–∏–µ**                                 | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                                                                                                                                                                                                                                                 |
| --------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| üÜï  <br>**`Transient`**  <br>_(–ü–µ—Ä–µ—Ö–æ–¥–Ω–æ–µ)_   | ‚Äî –°—É—â–Ω–æ—Å—Ç—å¬†**—Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–∞**¬†(`new`)  <br>‚Äî –ù–µ —Å–≤—è–∑–∞–Ω–∞ —Å –ë–î/¬†`persistence context`  <br>‚Äî –ù–µ –∏–º–µ–µ—Ç¬†`ID`  <br>**–í–æ–∑–º–æ–∂–µ–Ω**¬†–ø–µ—Ä–µ—Ö–æ–¥ –≤¬†`Managed`:  <br>`persist()`¬†->¬†**`Managed`**¬†, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç —Ä–∞–Ω–µ–µ¬†**–Ω–µ –∏–º–µ–ª**¬†`ID`  <br>`merge()`¬†->¬†**`Managed`**, –Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è¬†**–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç,¬†–ù–ï —Ç–µ–∫—É—â–∏–π**¬†—ç–∫–∑–µ–º–ø–ª—è—Ä!             |
| ‚úÖ  <br>**`Managed`**  <br>_(–£–ø—Ä–∞–≤–ª—è–µ–º–æ–µ)_     | ‚Äî –°—É—â–Ω–æ—Å—Ç—å¬†**—Å–≤—è–∑–∞–Ω–∞**¬†—Å¬†`Persistence Context`  <br>‚Äî –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è¬†`EntityManager`  <br>‚Äî –ë—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ **–ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ**.  <br>**–í–æ–∑–º–æ–∂–Ω–æ**:  <br>*¬†**—É–¥–∞–ª–∏—Ç—å**:¬†`remove()`¬†‚Üí¬†**`Removed`**  <br>*¬†**–æ—Ç—Å–æ–µ–¥–∏–Ω–∏—Ç—å**:¬†`close()`¬†–∏–ª–∏¬†`clear()`¬†‚Üí¬†**`Detached`**                                                   |
| üîå  <br>**`Detached`**  <br>_(–û—Ç—Å–æ–µ–¥–∏–Ω—ë–Ω–Ω–æ–µ)_ | ‚Äî –°—É—â–Ω–æ—Å—Ç—å¬†**–∏–º–µ–µ—Ç ID**, –Ω–æ¬†**–≤–Ω–µ**¬†`Persistence Context`  <br>‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏—è¬†**–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**  <br>**–í–æ–∑–º–æ–∂–Ω–æ**:  <br>*¬†**–ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ**¬†‚Äî¬†`merge()`¬†‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (_–∞¬†**–Ω–µ —Ç–µ–∫—É—â–∏–π**!_)  <br>*¬†**–Ω–∞–π—Ç–∏ –∑–∞–Ω–æ–≤–æ**¬†‚Äî¬†`find()`¬†–≤–µ—Ä–Ω—ë—Ç¬†**–Ω–æ–≤—ã–π**¬†`Managed`, —Ç–µ–∫—É—â–∏–π –æ—Å—Ç–∞–Ω–µ—Ç—Å—è¬†`Detached` |
| üóë  <br>**`Removed`**  <br>_(–£–¥–∞–ª—ë–Ω–Ω–æ–µ)_      | ‚Äî –°—É—â–Ω–æ—Å—Ç—å¬†**–ø–æ–º–µ—á–µ–Ω–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ**¬†(`em.remove(entity)`)  <br>‚Äî –í—Å—ë –µ—â—ë¬†`Managed`**–Ω–æ**¬†–±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –∏–∑ –ë–î **–ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ**.                                                                                                                                                                                                 |
### üìù –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:
**`new`**¬†‚Üí¬†`persist()`¬†‚Üí¬†**`Managed`**
**`Managed`**¬†‚Üí¬†`detach()`¬†‚Üí¬†**`Detached`**
**`Managed`**¬†‚Üí¬†`remove()`¬†‚Üí¬†**`Removed`**¬†‚Üí¬†**`Detached`**¬†(_–ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞_)

[![–ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏](https://github.com/yury-connect/ITM_task026_Java_Podgotovka_k_INTERVJU/raw/by_questions/ITM/ITM05_Hibernate/imgs/2025-04-08_18-02-16.png)](https://github.com/yury-connect/ITM_task026_Java_Podgotovka_k_INTERVJU/blob/by_questions/ITM/ITM05_Hibernate/imgs/2025-04-08_18-02-16.png)

> **–ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤¬†`EntityManager`:**
> 
> - **`persist(entity)`**: –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Å—É—â–Ω–æ—Å—Ç—å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è¬†**Transient**¬†–≤¬†**Managed**.  
>     –ï—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å —É–∂–µ¬†**Managed**, –º–µ—Ç–æ–¥ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.  
>     –ï—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å¬†**Removed**, –æ–Ω–∞ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è¬†**Managed**.
> - **`remove(entity)`**: –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Å—É—â–Ω–æ—Å—Ç—å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è¬†**Managed**¬†–≤¬†**Removed**.  
>     –ï—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å¬†**Detached**¬†–∏–ª–∏¬†**Transient**, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ¬†`IllegalArgumentException`.
> - **`merge(entity)`**: –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏  
>     —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —É–ø—Ä–∞–≤–ª—è–µ–º—É—é –∫–æ–ø–∏—é.  
>     –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª—è–µ–º—É—é —Å—É—â–Ω–æ—Å—Ç—å.  
>     –ï—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –±—ã–ª–∞¬†**Detached**, –æ–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
> - **`detach(entity)`**: –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Å—É—â–Ω–æ—Å—Ç—å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è¬†**Managed**¬†–≤¬†**Detached**, –ø—Ä–µ–∫—Ä–∞—â–∞—è –µ—ë –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–∏.
> - **`find(entityClass, primaryKey)`**: –ï—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—ë.  
>     –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥–µ–ª–∞–µ—Ç –µ—ë¬†**Managed**.
> - **`refresh(entity)`**: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ¬†**Managed**¬†—Å—É—â–Ω–æ—Å—Ç–∏, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

---

| –û–ø–µ—Ä–∞—Ü–∏—è    | New (–Ω–æ–≤—ã–π)                                                                                                                                                      | Managed (—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π)                                                                                                                                    | Detached (–æ—Ç—Å–æ–µ–¥–∏–Ω—ë–Ω–Ω—ã–π)                                                                                                                                              | Removed (—É–¥–∞–ª—ë–Ω–Ω—ã–π)                                                        |
| :---------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------- |
| **persist** | `new` ‚Üí `managed`, –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑—É –ø—Ä–∏ `commit`-–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ `flush`-–æ–ø–µ—Ä–∞—Ü–∏–∏.                                                     | `managed` ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è**, –æ–¥–Ω–∞–∫–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ `entity` –º–æ–≥—É—Ç –ø–æ–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ `managed`, –µ—Å–ª–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.                 | `detached` ‚Üí **exception** —Å—Ä–∞–∑—É –∏–ª–∏ –Ω–∞ —ç—Ç–∞–ø–µ `commit`-–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (*—Ç–∞–∫ –∫–∞–∫ —É `detached` —É–∂–µ –µ—Å—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á*).                                                 | `removed` ‚Üí `managed` (*–≤–æ–∑–≤—Ä–∞—Ç –≤ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Å—Ç–∞—Ç—É—Å*)                     |
| **remove**  | new ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –æ–¥–Ω–∞–∫–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ entity –º–æ–≥—É—Ç –ø–æ–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ removed, –µ—Å–ª–∏ —É –Ω–∏—Ö –µ—Å—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –æ–Ω–∏ –∏–º–µ–ª–∏ —Å—Ç–∞—Ç—É—Å managed. | managed ‚Üí removed, –∏ –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ –ø—Ä–∏ commit-–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Ç–∞–∫–∂–µ –ø—Ä–æ–∏–∑–æ–π–¥—É—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ remove –¥–ª—è –≤—Å–µ—Ö –∫–∞—Å–∫–∞–¥–Ω–æ –∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤). | ‚ùå **Exception** detached ‚Üí exception —Å—Ä–∞–∑—É –∏–ª–∏ –Ω–∞ —ç—Ç–∞–ø–µ commit-–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.                                                                                          | removed ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è                                            |
| **merge**   | new ‚Üí –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è managed entity, –≤ –∫–æ—Ç–æ—Ä—É—é –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç–∞.                                                                            | managed ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –æ–¥–Ω–∞–∫–æ –æ–ø–µ—Ä–∞—Ü–∏—è merge —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞—Å–∫–∞–¥–Ω–æ –∑–∞–≤–∏—Å–∏–º—ã—Ö entity, –µ—Å–ª–∏ –∏—Ö —Å—Ç–∞—Ç—É—Å –Ω–µ managed.                                | detached ‚Üí –ª–∏–±–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î managed entity —Å —Ç–µ–º –∂–µ –ø–µ—Ä–≤–∏—á–Ω—ã–º –∫–ª—é—á–æ–º, –ª–∏–±–æ —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è managed entity, –≤ –∫–æ—Ç–æ—Ä—É—é —Å–∫–æ–ø–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ. | ‚ùå **Exception** removed ‚Üí –ï—Öception —Å—Ä–∞–∑—É –∏–ª–∏ –Ω–∞ —ç—Ç–∞–ø–µ commit-–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ |
| **refresh** | ‚ùå **Exception**                                                                                                                                                  | managed ‚Üí –±—É–¥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω–æ–≥–æ entity, —Ç–∞–∫–∂–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç refresh –≤—Å–µ—Ö –∫–∞—Å–∫–∞–¥–Ω–æ –∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.                    | ‚ùå **Exception**                                                                                                                                                       | ‚ùå **Exception**                                                            |
| **detach**  | ‚ùå **Exception** (*–Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞*) `new` ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è                                                                                                | `managed` ‚Üí `detached` (*–±–æ–ª—å—à–µ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è*)                                                                                                       | `detached` ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è. (—É–∂–µ `detached`)                                                                                                                  | `removed` ‚Üí `detached` (–ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ)                           |
### –ü–æ—è—Å–Ω–µ–Ω–∏—è:
1. **New**¬†‚Äî –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, –Ω–æ –µ—â—ë –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (`em.contains(entity) == false`).    
2. **Managed**¬†‚Äî –æ–±—ä–µ–∫—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è).    
3. **Detached**¬†‚Äî –æ–±—ä–µ–∫—Ç –±—ã–ª¬†`managed`, –Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ –≤—ã–∑–≤–∞–Ω¬†`detach()`.    
4. **Removed**¬†‚Äî –æ–±—ä–µ–∫—Ç –ø–æ–º–µ—á–µ–Ω –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ (`em.remove()`), –Ω–æ –µ—â—ë –Ω–µ —É–¥–∞–ª—ë–Ω –∏–∑ –ë–î.    
### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**¬†‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ¬†`cascade = CascadeType.ALL`¬†(–∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è) –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏¬†`@OneToMany`/`@ManyToOne`.    
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**¬†‚Äî —á–∞—â–µ –≤—Å–µ–≥–æ¬†`IllegalArgumentException`¬†–∏–ª–∏¬†`PersistenceException`.    
- **Refresh**¬†‚Äî –∞–∫—Ç—É–∞–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è¬†`managed`-–æ–±—ä–µ–∫—Ç–æ–≤ (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î).    

---
# –ü–æ–¥—Ä–æ–±–Ω–æ:
## ====–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å—É—â–Ω–æ—Å—Ç–∏ Entity, –ø–µ—Ä–µ—á–∏—Å–ª–∏ —á–µ—Ç—ã—Ä–µ —Å—Ç–∞—Ç—É—Å–∞ –ñ–¶ Entity –æ–±—ä–µ–∫—Ç–∞ (*Entity Instance‚Äôs Life Cycle*).====
![–ü–µ—Ä–µ—Ö–æ–¥—ã](_Attachments_19_4_—Å—Ç–∞—Ç—É—Å–∞_–∂_—Ü_Entity/–ø–µ—Ä–µ—Ö–æ–¥—ã.png)
## –≠—Ç–∞–ø ‚Ññ1 **New**, <br>–ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (*Transient State*) 
### –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, **–Ω–µ** –∏–º–µ–µ—Ç `primary key`, **–Ω–µ** —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (*–Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA*);  
–ü–µ—Ä–µ—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî —ç—Ç–æ **–ø–µ—Ä–≤–æ–µ** —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å—É—â–Ω–æ—Å—Ç–∏. –ö–æ–≥–¥–∞ –º—ã —Å–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç *POJO* –∫–ª–∞—Å—Å–∞ —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `new`, –æ–±—ä–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ *–ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–º* 
—Å–æ—Å—Ç–æ—è–Ω–∏–∏. –≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç <u>–Ω–µ —Å–≤—è–∑–∞–Ω</u> –Ω–∏ —Å –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–µ–π, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Å–≤—è–∑–∞–Ω–æ <u>–Ω–∏ —Å –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π</u> –ë–î. –ò—Ç–∞–∫, –µ—Å–ª–∏ –º—ã –≤–Ω–µ—Å–µ–º –∫–∞–∫–∏–µ-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–∞ *POJO*, —Ç–∞–±–ª–∏—Ü–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö <u>–Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è</u>. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç *Hibernate* –∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –∫—É—á–µ –ø–∞–º—è—Ç–∏.
![New](_Attachments_19_4_—Å—Ç–∞—Ç—É—Å–∞_–∂_—Ü_Entity/New.png)
## –≠—Ç–∞–ø ‚Ññ2 **Managed**, <br>–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (*Persistent State*) 
### –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, –∏–º–µ–µ—Ç `primary key`, —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (*—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA*); 
–ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Å—Å–∏–∏, –æ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ** —Å–æ—Å—Ç–æ—è–Ω–∏–µ.  
–ï—Å—Ç—å –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:  
- –ò—Å–ø–æ–ª—å–∑—É—è —Å–µ—Å—Å–∏—é, **—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å** –æ–±—ä–µ–∫—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. 
- –ò—Å–ø–æ–ª—å–∑—É—è —Å–µ—Å—Å–∏—é, **–∑–∞–≥—Ä—É–∑–∏—Ç—å** –æ–±—ä–µ–∫—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. 
–í —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ –ë–î. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –≤–Ω–µ—Å—Ç–∏ –∫–∞–∫–∏–µ-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã–µ, —Ç–æ *hibernate* <u>–æ–±–Ω–∞—Ä—É–∂–∏—Ç —ç—Ç–æ –∏ –≤–Ω–µ—Å–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü—É</u> –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
![Managed](_Attachments_19_4_—Å—Ç–∞—Ç—É—Å–∞_–∂_—Ü_Entity/Managed.png)

## –≠—Ç–∞–ø ‚Ññ3 **Detached**, <br>–æ—Ç—Å–æ–µ–¥–∏–Ω—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (*Detached State*) 
### –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, –∏–º–µ–µ—Ç `primary key`, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è (*–∏–ª–∏ –±–æ–ª—å—à–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è*) —á–∞—Å—Ç—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–Ω*–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA*);
–î–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∏–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤ –æ—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω—É–∂–Ω–æ –ª–∏–±–æ –∑–∞–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é, –ª–∏–±–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à. –ü–æ—Å–∫–æ–ª—å–∫—É —Å–µ—Å—Å–∏—è –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç–∞ –∏–ª–∏ –∫–µ—à –æ—á–∏—â–µ–Ω, –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤–Ω–µ—Å–µ–Ω–Ω—ã–µ –≤ –¥–∞–Ω–Ω—ã–µ, –Ω–µ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ —Ç–∞–±–ª–∏—Ü—É  –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏.
![Detached](_Attachments_19_4_—Å—Ç–∞—Ç—É—Å–∞_–∂_—Ü_Entity/Detached.png)

## –≠—Ç–∞–ø ‚Ññ4 **Removed**, <br>—Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´**—É–¥–∞–ª–µ–Ω–æ**¬ª (*Removed State*) 
### –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (*—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA*), –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –ø—Ä–∏ *commit*-–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (*–∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–µ—Å—Å–∏–∏ –∏–ª–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ `flush()`*). 
–í –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ —Å–ø—è—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —Å—É—â–Ω–æ—Å—Ç–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –æ–±—ä–µ–∫—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—É—Ç–µ–º –≤—ã–∑–æ–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ `delete()`. –ü–æ—Å–∫–æ–ª—å–∫—É *Entity* –æ–±—ä–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö <u>–Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–∞–±–ª–∏—Ü—É</u> –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
![Removed](_Attachments_19_4_—Å—Ç–∞—Ç—É—Å–∞_–∂_—Ü_Entity/Removed.png)

---
## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:

```java
// –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∞ Transient -> Managed
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
Person person = new Person();
person.setName("–ò–≤–∞–Ω");
em.persist(person); // –¢–µ–ø–µ—Ä—å person –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Managed
em.getTransaction().commit();
em.close();
```

```java
// –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∞ Managed -> Detached
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
Person person = em.find(Person.class, 1L); // person –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Managed
em.detach(person); // –¢–µ–ø–µ—Ä—å person –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Detached
em.getTransaction().commit();
em.close();
```

```java
// –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∞ Detached -> Managed
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
Person detachedPerson = new Person();
detachedPerson.setId(1L);
detachedPerson.setName("–ü—ë—Ç—Ä");
Person managedPerson = em.merge(detachedPerson); // managedPerson –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Managed
em.getTransaction().commit();
em.close();
```

---

```
***** –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏ *****
Transient (New) ‚Äî —Å–≤–µ–∂–µ—Å–æ–∑–¥–∞–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º new() —Å—É—â–Ω–æ—Å—Ç—å –Ω–µ –∏–º–µ–µ—Ç —Å–≤—è–∑–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, 
–Ω–µ –∏–º–µ–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –∏–º–µ–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π.

managed - –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –±–¥, –∏–º–µ–µ—Ç primary key, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA
detached -–æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, –∏–º–µ–µ—Ç primary key, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è (–∏–ª–∏ –±–æ–ª—å—à–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è) 
    —á–∞—Å—Ç—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA);
removed - –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JPA, –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –ø—Ä–∏ commit-–µ –∏ —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–Ω–µ—Ç –æ–ø—è—Ç—å detached
```

---
