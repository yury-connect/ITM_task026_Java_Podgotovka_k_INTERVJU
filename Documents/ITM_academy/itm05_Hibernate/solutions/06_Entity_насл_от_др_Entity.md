# –ú–æ–∂–µ—Ç –ª–∏ `Entity` –∫–ª–∞—Å—Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö `Entity` –∫–ª–∞—Å—Å–æ–≤?

---
### ‚úÖ –î–∞, –º–æ–∂–µ—Ç.
–ù–æ —Å —ç—Ç–∏–º —Å–≤—è–∑–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ JPA/Hibernate**, –∏ —Ç—É—Ç –≤–∞–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.

### üß¨ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ JPA-–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (`@Inheritance`)

| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**                      | `JOIN`'—ã                                                                  | **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | **–û–ø–∏—Å–∞–Ω–∏–µ** / –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å?                                                                                         |
| ---------------------------------- | ------------------------------------------------------------------------- | ---------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| üü® `SINGLE_TABLE` _(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)_ | ‚ùå                                                                         | üî• –í—ã—Å–æ–∫–∞—è             | –í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ ‚Äî –≤ **–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@DiscriminatorColumn`  <br>/–ö–æ–≥–¥–∞ **–ø—Ä–æ—Å—Ç–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è**, –Ω–µ–º–Ω–æ–≥–æ –ø–æ–ª–µ–π |
| üü¶ `JOINED`                        | ‚úÖ                                                                         | üê¢ –°—Ä–µ–¥–Ω—è—è             | –ö–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å ‚Äî –≤ —Å–≤–æ–µ–π —Ç–∞–±–ª–∏—Ü–µ, —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –ø–æ –≤–Ω–µ—à–Ω–µ–º—É –∫–ª—é—á—É  <br>/–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ **–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ë–î** –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å  |
| üü™ `TABLE_PER_CLASS`               | ‚ùå                                                                         | üêå –ù–∏–∑–∫–∞—è              | –ö–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å ‚Äî —Å–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞, **–±–µ–∑ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è**  <br>/–ö–æ–≥–¥–∞ –∫–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å **–æ—Ç–¥–µ–ª—å–Ω–∞** –∏ **–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞**           |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**                      | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                              |                        |                                                                                                                         |
### üí° –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é?
üîπ –¢—ã ‚Äî **–ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫** ‚Üí 
	–±–µ—Ä–∏ `SINGLE_TABLE`. –í—Å—ë –≤ –æ–¥–Ω–æ–π –∫—É—á–µ, –±—ã—Å—Ç—Ä–æ, –ª–µ–≥–∫–æ.  
üîπ –¢—ã ‚Äî **—á–∏—Å—Ç–æ–ø–ª–æ—Ç–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä** ‚Üí 
	`JOINED`. –í—Å—ë –ø–æ –ø–æ–ª–æ—á–∫–∞–º, –±–µ–∑ `null`'–æ–≤, –∫—Ä–∞—Å–∏–≤–æ.  
üîπ –¢—ã ‚Äî **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏—Å—Ç** ‚Üí 
	`TABLE_PER_CLASS`. –ü–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞, –Ω–æ –±—É–¥—å –≥–æ—Ç–æ–≤ –∫ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏.
### üõ†Ô∏è –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏
- `@Inheritance(strategy = ...)` ‚Äî –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º `@Entity` –∫–ª–∞—Å—Å–µ
- `@DiscriminatorColumn` ‚Äî (–¥–ª—è `SINGLE_TABLE`) –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤
- `@DiscriminatorValue` ‚Äî –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
- `@PrimaryKeyJoinColumn` ‚Äî (–¥–ª—è `JOINED`) —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –ø–æ—Ç–æ–º–∫–∞

|**–ú–æ–∂–Ω–æ –ª–∏?**|**–£—Å–ª–æ–≤–∏–µ**|**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π**|
|---|---|---|
|‚úÖ –î–∞|–û–±–∞ –∫–ª–∞—Å—Å–∞ `@Entity`|–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π `@Inheritance` –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ|
|‚ö† –í–∞–∂–Ω–æ|–ù–∞—Å—Ç—Ä–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è|–ò–Ω–∞—á–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –º–∞–ø–ø–∏–Ω–≥–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü|
#### üí° –°–æ–≤–µ—Ç:  
–ò—Å–ø–æ–ª—å–∑—É–π `JOINED` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã,   
`SINGLE_TABLE` ‚Äî –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è.   
–ê –≤–æ—Ç `TABLE_PER_CLASS` ‚Äî —Ä–µ–¥–∫–æ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–±–µ **–æ—á–µ–Ω—å** –Ω—É–∂–Ω–æ.

> –£ Entity-–∫–ª–∞—Å—Å–æ–≤ –º–æ–∂_–±—ã—Ç—å —Ä–æ–¥–æ—Å–ª–æ–≤–Ω–∞—è, –Ω–æ —É –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ ‚Äî —Å–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Äüòâ

---
## –ü–†–ò–ú–ï–†–´:

### ‚òù –í—Å–µ –∫–ª–∞—Å—Å—ã ‚Äî –æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞
```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type")
public abstract class Animal {
    @Id
    private Long id;
    private String name;
}

@Entity
@DiscriminatorValue("Dog")
public class Dog extends Animal {
    private String breed;
}

@Entity
@DiscriminatorValue("Cat")
public class Cat extends Animal {
    private String color;
}
```
#### üóÉÔ∏è **–¢–∞–±–ª–∏—Ü–∞ `Animal` –≤ –ë–î:**

|id|name|type|breed|color|
|---|---|---|---|---|
|1|–ë–æ–±–∏–∫|Dog|–•–∞—Å–∫–∏|null|
|2|–ú—É—Ä–∫–∞|Cat|null|–†—ã–∂–∏–π|
‚úÖ –ü—Ä–æ—Å—Ç–∞ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
‚ùå –ú–Ω–æ–≥–æ `null` –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö, –µ—Å–ª–∏ –º–Ω–æ–≥–æ –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤

### üí° `@Inheritance(strategy = InheritanceType.JOINED)`  
‚òù –ö–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å ‚Äî —Å–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞, —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–ª—é—á–∞–º–∏
```java
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Animal {
    @Id
    private Long id;
    private String name;
}

@Entity
public class Dog extends Animal {
    private String breed;
}

@Entity
public class Cat extends Animal {
    private String color;
}
```
#### üóÉÔ∏è **–¢–∞–±–ª–∏—Ü—ã –≤ –ë–î:**
###### **Animal:**

|id|name|
|---|---|
|1|–ë–æ–±–∏–∫|
|2|–ú—É—Ä–∫–∞|
###### **Dog:**

|id|breed|
|---|---|
|1|–•–∞—Å–∫–∏|

###### **Cat:**

|id|color|
|---|---|
|2|–†—ã–∂–∏–π|
‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
‚ùå –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ `JOIN`-–∑–∞–ø—Ä–æ—Å—ã

### üí° @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)  
‚òù –ö–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å ‚Äî —Å–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞, –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è
```java
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Animal {
    @Id
    private Long id;
    private String name;
}

@Entity
public class Dog extends Animal {
    private String breed;
}

@Entity
public class Cat extends Animal {
    private String color;
}
```

###### üóÉÔ∏è **–¢–∞–±–ª–∏—Ü–∞ `Dog`:**

|id|name|breed|
|---|---|---|
|1|–ë–æ–±–∏–∫|–•–∞—Å–∫–∏|

###### üóÉÔ∏è **–¢–∞–±–ª–∏—Ü–∞ `Cat`:**

|id|name|color|
|---|---|---|
|2|–ú—É—Ä–∫–∞|–†—ã–∂–∏–π|
‚úÖ –ù–µ—Ç `null`, –∫–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–∞  
‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JPQL –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –∫–ª–∞—Å—Å—É `Animal`, –Ω—É–∂–µ–Ω `UNION ALL` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö

---
### üî• **–†–µ–∑—é–º–µ –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º**

|**–°—Ç—Ä–∞—Ç–µ–≥–∏—è**|**–¢–∞–±–ª–∏—Ü**|**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**|**–ü—Ä–æ—Å—Ç–æ—Ç–∞**|**–ü–ª—é—Å—ã**|**–ú–∏–Ω—É—Å—ã**|
|---|---|---|---|---|---|
|**SINGLE_TABLE**|1|üî• –í—ã—Å–æ–∫–∞—è|‚úÖ –ü—Ä–æ—Å—Ç–∞—è|–õ–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å, –º–µ–Ω—å—à–µ `JOIN`'–æ–≤|–ú–Ω–æ–≥–æ `null`, –Ω–µ—á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å|
|**JOINED**|N|üê¢ –°—Ä–µ–¥–Ω—è—è|‚ö† –°–ª–æ–∂–Ω–µ–µ|–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —á–∏—Å—Ç–∞—è –º–æ–¥–µ–ª—å|`JOIN`-—ã –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö|
|**TABLE_PER_CLASS**|N|üê¢üê¢ –ù–∏–∑–∫–∞—è|‚ö†‚ö† –°–ª–æ–∂–Ω–∞—è|–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã|–ù–µ—É–¥–æ–±–Ω–∞ –¥–ª—è –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤|

---

---

```
***** –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏ *****
–ú–æ–∂–µ—Ç
```

---
