# Prometeus (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∏–∑–Ω–µ—Å - –º–µ—Ç—Ä–∏–∫/ –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤/ –≤—ã–∑–æ–≤–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞?

---
## üìä Prometheus ‚Äî –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏

---
# ü•á 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞

–≠—Ç–æ **—Å–º—ã—Å–ª–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞**, –∞ –Ω–µ —Ç–µ—Ö. (CPU, heap).  
–ü—Ä–∏–º–µ—Ä—ã:
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤    
- —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–ª–∞—Ç—ã    
- –≤—ã–∑–æ–≤—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞    
- –∫–æ–Ω–≤–µ—Ä—Å–∏—è    

üëâ –ú–µ—Ç—Ä–∏–∫–∞ = —á–∏—Å–ª–æ, –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.

---
# ü•à 2. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –º–µ—Ç—Ä–∏–∫

|–¢–∏–ø|–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|
|---|---|
|Counter|–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π (–∑–∞–∫–∞–∑—ã, –≤—ã–∑–æ–≤—ã)|
|Gauge|–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ|
|Histogram|–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è|
|Summary|–ü–æ—Ö–æ–∂–∏–µ –Ω–∞ Histogram|

–î–ª—è –∑–∞–∫–∞–∑–æ–≤ ‚Üí **Counter**.

---
# ü•â 3. –ü—Ä–∏–º–µ—Ä: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤
```java
private final Counter ordersCounter = Counter  
    .builder("orders_total")  
    .description("Total number of created orders")  
    .register(meterRegistry);  
  
public void createOrder() {  
    ordersCounter.increment();  
}
```

---
# 4. –ú–µ—Ç—Ä–∏–∫–∞ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞

–õ—É—á—à–µ —á–µ—Ä–µ–∑ AOP:
```java
@Counted("service_method_calls_total")  
public void processPayment() {  
}
```

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Micrometer ‚Äî –æ–Ω –Ω–∞—Ç–∏–≤–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Prometheus.

---
# üß© 5. –ú–µ—Ç–∫–∏ (labels)

–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
```
orders_total{status="SUCCESS"}  
orders_total{status="FAILED"}
```

‚ö† –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä userId).

---
# üèó 6. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ

1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç `/actuator/prometheus`    
2. Prometheus —Å–∫—Ä–µ–π–ø–∏—Ç endpoint    
3. –°—Ç—Ä–æ–∏—à—å –≥—Ä–∞—Ñ–∏–∫–∏ –≤ Grafana    

---
# ‚öñÔ∏è –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å

- Prometheus –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É    
- –û–Ω –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —á–∏—Å–ª–∞    
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ PromQL    

---
# üß† –ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞

CPU ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥  
Orders ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞  
Latency ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

---
